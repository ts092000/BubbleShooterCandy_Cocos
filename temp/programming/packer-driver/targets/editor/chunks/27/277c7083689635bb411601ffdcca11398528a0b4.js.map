{"version":3,"sources":["file:///Users/ADMIN/Desktop/BubbleShooterCandy_Github/BubbleShooterCandy_Cocos/assets/Scripts/MenuController.ts"],"names":["_decorator","Component","director","Vec3","tween","MenuModel","MenuView","Controller","ccclass","property","MenuController","type","gameClient","matchData","start","MusicBg","volume","volumeValueMusic","InGameAudio","volumeValueVFX","play","OnMusicNode","active","OffMusicNode","OnVfxNode","OffVfxNode","update","deltaTime","playGame","playSound","initGame","settingPopup","SettingNode","SettingTableAnim","closeSettingPopup","onMusic","offMusic","onVfx","offVfx","clip","AudioGame","openInfoPopup","InfoNode","tweenInfoPopup","InfoTable","to","scale","closeInfoPopup","scheduleOnce","loadScene"],"mappings":"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","sourcesContent":["import { _decorator, Component, director, Node, Vec3, tween, find } from 'cc';\nimport { MenuModel } from './MenuModel';\nimport { MenuView } from './MenuView';\nimport { Controller } from './Splash/Controller';\nimport { StoredAPI } from './StoredAPI';\nconst { ccclass, property } = _decorator;\n\n@ccclass('MenuController')\nexport class MenuController extends Component {\n    @property({type: MenuModel})\n    private MenuModel: MenuModel;\n\n    @property({type: MenuView})\n    private MenuView: MenuView;\n\n    public gameClient: any;\n    public matchData: any;\n\n    start() {\n        this.MenuView.MusicBg.volume = Controller.volumeValueMusic;\n        this.MenuView.InGameAudio.volume = Controller.volumeValueVFX;\n        this.MenuView.MusicBg.play();\n\n        if (this.MenuView.MusicBg.volume === 0) {\n            this.MenuModel.OnMusicNode.active = false;\n            this.MenuModel.OffMusicNode.active = true;\n        }\n        else {\n            this.MenuModel.OnMusicNode.active = true;\n            this.MenuModel.OffMusicNode.active = false;\n        }\n\n        if (this.MenuView.InGameAudio.volume === 0) {\n            this.MenuModel.OnVfxNode.active = false;\n            this.MenuModel.OffVfxNode.active = true;\n        }\n        else {\n            this.MenuModel.OnVfxNode.active = true;\n            this.MenuModel.OffVfxNode.active = false;\n        }\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    private playGame(): void {\n        this.playSound();\n        this.initGame();\n    }\n\n    private settingPopup(): void {\n        this.playSound();\n        this.MenuView.SettingNode.active = true;\n        this.MenuView.SettingTableAnim.play();\n    }\n\n    private closeSettingPopup(): void {\n        this.playSound();\n        this.MenuView.SettingNode.active = false;\n    }\n\n    private onMusic(): void {\n        this.MenuView.MusicBg.volume = 0;\n        Controller.volumeValueMusic = this.MenuView.MusicBg.volume;\n        this.playSound();\n        this.MenuModel.OnMusicNode.active = !this.MenuModel.OnMusicNode.active;\n        this.MenuModel.OffMusicNode.active = !this.MenuModel.OffMusicNode.active;\n    }\n\n    private offMusic(): void {\n        this.MenuView.MusicBg.volume = 0.5;\n        Controller.volumeValueMusic = this.MenuView.MusicBg.volume;\n        this.playSound();\n        this.MenuModel.OnMusicNode.active = !this.MenuModel.OnMusicNode.active;\n        this.MenuModel.OffMusicNode.active = !this.MenuModel.OffMusicNode.active;\n        \n    }\n\n    private onVfx(): void {\n        this.MenuView.InGameAudio.volume = 0;\n        Controller.volumeValueVFX = this.MenuView.InGameAudio.volume;\n        this.playSound();\n        this.MenuModel.OnVfxNode.active = !this.MenuModel.OnVfxNode.active;\n        this.MenuModel.OffVfxNode.active = !this.MenuModel.OffVfxNode.active;\n    }\n\n    private offVfx(): void {\n        this.MenuView.InGameAudio.volume = 0.7;\n        Controller.volumeValueVFX = this.MenuView.InGameAudio.volume;\n        this.playSound();\n        this.MenuModel.OnVfxNode.active = !this.MenuModel.OnVfxNode.active;\n        this.MenuModel.OffVfxNode.active = !this.MenuModel.OffVfxNode.active;;\n    }\n\n    private playSound(): void {\n        this.MenuView.InGameAudio.clip = this.MenuView.AudioGame[8];\n        this.MenuView.InGameAudio.play();\n    }\n\n    private openInfoPopup(): void {\n        this.playSound();\n        this.MenuView.InfoNode.active = true;\n        let tweenInfoPopup = tween(this.MenuView.InfoTable).to(0.5, { scale: new Vec3(1, 1, 1) })\n        tweenInfoPopup.start();\n    }\n\n    private closeInfoPopup(): void {\n        this.playSound();\n        let tweenInfoPopup = tween(this.MenuView.InfoTable).to(0.5, { scale: new Vec3(0, 0, 1) })\n        tweenInfoPopup.start();\n        this.scheduleOnce(function(){\n            this.MenuView.InfoNode.active = false;\n        }, 0.5)\n    }\n\n    private async initGame(): Promise<void> {\n        // let _this = this;\n        // let parameters = find(\"GameClient\");\n        // let gameClientParams = parameters.getComponent(StoredAPI);\n        // this.gameClient = gameClientParams.gameClient;\n        // this.MenuModel.BtnSetting.interactable = false;\n        // this.MenuModel.BtnInfo.node.active = false;\n        // this.MenuModel.BtnPlay.node.active = false;\n        // this.MenuView.LoadingText.active = true;\n        // this.MenuView.LoadingAnimNode.active = true;\n        // this.MenuView.LoadingAnim.play();\n        // await gameClientParams.gameClient.match.startMatch()\n        //     .then((data) => {\n        //         gameClientParams.matchData = data;\n        //         director.addPersistRootNode(parameters);\n        //     })\n        //     .catch((error) => console.log(error));\n        director.loadScene('Game');\n    }\n}\n\n"]}