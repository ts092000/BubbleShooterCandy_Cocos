{"version":3,"sources":["file:///Users/ADMIN/Desktop/BubbleShooterCandy_Github/BubbleShooterCandy_Cocos/assets/Scripts/GameController.ts"],"names":["_decorator","Component","Node","Vec3","Input","tween","instantiate","Sprite","randomRangeInt","Tween","Animation","director","Vec2","Button","find","GameModel","GameView","Controller","DataGame","ccclass","property","GameController","type","v3","gridRow","gridCol","lengthRow","lengthCol","xFirst","yFirst","x","y","randomNumber","BallRandomNumber","newBallRandomNumber","isBounced","numberBallClear","extraTurn","score","scoreResult","isAddScore","newBallNode","newBallPos","isLose","isLosed","isEatBall","newBallCol","newBallRow","rad","newTan2","extra","isTopTouch","numberPlus","tweenDuration","indexFirst","indexLast","newIndexLast","initArray","initArrayNode","initArrayPos","topPosX","topPosY","gameClient","matchData","userID","start","PauseBtn","node","on","EventType","CLICK","clickBtn","BackgroundAudio","play","document","addEventListener","visibilityState","pauseBtn","volume","volumeValueMusic","InGameAudio","volumeValueVFX","SoundMusicOnNode","active","SoundMusicOffNode","SoundInGameOnNode","SoundInGameOffNode","initArr","instantiateMap","BallShootNodeSF","spriteFrame","BallSF","predictBallNode","scheduleOnce","TableNode","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","MOUSE_MOVE","onMouseMove","length","row","Array","rowNode","rowPos","fill","push","update","deltaTime","BallShootNode","position","stopAllByTarget","instantiateBallTop","tweenBallShoot","checkBall","getContainerLocation","event","location","CameraGame","screenToWorld","getLocation","inverseTransformPoint","newAngle","xTan","yTan","Math","atan2","PI","ArrowNode","angle","newTan","tan","to","easing","off","clip","AudioGame","getContainerLocationMouse","col","BallPrefab","getComponent","clips","BallBreakAnim","defaultClip","BallContainer","addChild","i","collisionBallNode","checkDuplicateTop","addNumberArr","randomNewBall","instantiateNewBall","BallNodeAnim","BallNewNode","children","checkLose","newRowBall","checkDuplicateBall","abs","floor","clearCluster","listCoor","getCluster","listNode","map","coor","addScore","listLinkCoor","console","log","emptyCoor","getEmptyCoor","anim","addComponent","FINISHED","list","listResult","index","findIndex","item","j","checkDuplicateBallRight","checkDuplicateBallLeft","checkDuplicateBallRightUnder","checkDuplicateBallLeftUnder","pushDownBall","gameOverAction","BlackBlurNode","PlayAgainBtn","interactable","ScoreResultLabel","string","toString","GameOverNode","gameOverTableTween","LoadingText","LoadingAnimNode","LoadingAnim","dataUser","data","highScore","completeGame","HighScoreLabel","playAgain","PlayAgainBtnGameOver","initGame","backHome","loadScene","startCoor","queue","visited","cluster","deltaEven","deltaOdd","temp","shift","newCoor","PauseNode","pauseTween","PauseTableNode","scale","unPauseBtn","muteMusic","unMuteMusic","muteInGameAudio","unMuteInGameAudio","schedule","ScoreLabel","_this","parameters","BackHomeBtn"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAkBC,MAAAA,I,OAAAA,I;AAAaC,MAAAA,K,OAAAA,K;AAAmBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,c,OAAAA,c;AAAgBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAOC,MAAAA,I,OAAAA,I;;AAC9JC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AAGAC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBpB,U;;gCAGjBqB,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI;AAAA;AAAA;AAAN,OAAD,C,UAGRF,QAAQ,CAAC;AAAEE,QAAAA,IAAI;AAAA;AAAA;AAAN,OAAD,C,2BALb,MACaD,cADb,SACoCpB,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAOlCsB,EAPkC,GAOvB,IAAIpB,IAAJ,EAPuB;AAAA,eASlCqB,OATkC,GAShB,CATgB;AAAA,eAUlCC,OAVkC,GAUhB,EAVgB;AAAA,eAYlCC,SAZkC,GAYd,EAZc;AAAA,eAalCC,SAbkC,GAad,EAbc;AAAA,eAelCC,MAfkC,GAejB,CAAC,GAfgB;AAAA,eAgBlCC,MAhBkC,GAgBjB,GAhBiB;AAAA,eAkBlCC,CAlBkC,GAkBtB,GAlBsB;AAAA,eAmBlCC,CAnBkC,GAmBtB,GAnBsB;AAAA,eAqBlCC,YArBkC;AAAA,eAsBlCC,gBAtBkC;AAAA,eAuBlCC,mBAvBkC;AAAA,eAwBlCC,SAxBkC,GAwBb,IAxBa;AA0B1C;AACA;AACA;AA5B0C,eA8BlCC,eA9BkC;AAAA,eA+BlCC,SA/BkC,GA+Bd,CA/Bc;AAAA,eAgClCC,KAhCkC,GAgClB,CAhCkB;AAAA,eAiClCC,WAjCkC,GAiCZ,CAjCY;AAAA,eAkClCC,UAlCkC,GAkCZ,IAlCY;AAAA,eAoClCC,WApCkC,GAoCd,IAAIvC,IAAJ,EApCc;AAAA,eAqClCwC,UArCkC,GAqCf,IAAIvC,IAAJ,CAAS,CAAC,GAAV,EAAe,GAAf,EAAoB,CAApB,CArCe;AAAA,eAuClCwC,MAvCkC,GAuChB,IAvCgB;AAAA,eAwClCC,OAxCkC,GAwCf,KAxCe;AAAA,eAyClCC,SAzCkC,GAyCb,KAzCa;AAAA,eA2ClCC,UA3CkC;AAAA,eA4ClCC,UA5CkC;AAAA,eA8ClCC,GA9CkC;AAAA,eA+ClCC,OA/CkC;AAAA,eAgDlCC,KAhDkC,GAgDlB,GAhDkB;AAAA,eAiDlCC,UAjDkC,GAiDZ,IAjDY;AAAA,eAmDlCC,UAnDkC,GAmDb,CAnDa;AAAA,eAqDlCC,aArDkC,GAqDV,GArDU;AAAA,eAuDlCC,UAvDkC,GAuDb,CAvDa;AAAA,eAwDlCC,SAxDkC,GAwDd,CAxDc;AAAA,eAyDlCC,YAzDkC,GAyDX,CAzDW;AAAA,eA2DnCC,SA3DmC,GA2DvB,EA3DuB;AAAA,eA4DnCC,aA5DmC,GA4DnB,EA5DmB;AAAA,eA6DnCC,YA7DmC,GA6DpB,EA7DoB;AAAA,eA+DnCC,OA/DmC,GA+Df,CAAC,CAAC,GAAF,EAAO,CAAC,GAAR,EAAa,CAAC,GAAd,EAAmB,CAAC,GAApB,EAAyB,CAAC,GAA1B,EAA+B,CAAC,GAAhC,EAAqC,CAAC,EAAtC,EAA0C,CAAC,EAA3C,EAA+C,CAAC,EAAhD,EAAoD,EAApD,EAAwD,EAAxD,EAA4D,GAA5D,EAAiE,GAAjE,EAAsE,GAAtE,EAA2E,GAA3E,EAAgF,GAAhF,EAAqF,GAArF,CA/De;AAAA,eAgEnCC,OAhEmC,GAgEjB,GAhEiB;AAAA,eAkEnCC,UAlEmC;AAAA,eAmEnCC,SAnEmC;AAAA,eAoEnCC,MApEmC;AAAA;;AAsEhCC,QAAAA,KAAK,GAAS;AACpB;AACA;AACA;AACA;AAEA;AAEA,eAAKlD,SAAL,CAAemD,QAAf,CAAwBC,IAAxB,CAA6BC,EAA7B,CAAgCvD,MAAM,CAACwD,SAAP,CAAiBC,KAAjD,EAAwD,KAAKC,QAA7D,EAAuE,IAAvE;AACA,eAAKxD,SAAL,CAAeyD,eAAf,CAA+BC,IAA/B;AAEAC,UAAAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,MAAM;AAChD,gBAAI,EAAED,QAAQ,CAACE,eAAT,IAA4B,SAA9B,KAA4C,KAAKhC,OAAL,KAAiB,KAAjE,EAAwE;AACpE,mBAAKiC,QAAL;AACH;AACJ,WAJD;AAMA,eAAK9D,SAAL,CAAeyD,eAAf,CAA+BM,MAA/B,GAAwC;AAAA;AAAA,wCAAWC,gBAAnD;AACA,eAAKhE,SAAL,CAAeiE,WAAf,CAA2BF,MAA3B,GAAoC;AAAA;AAAA,wCAAWG,cAA/C;;AACA,cAAI,KAAKlE,SAAL,CAAeyD,eAAf,CAA+BM,MAA/B,KAA0C,CAA9C,EAAiD;AAC7C,iBAAK/D,SAAL,CAAemE,gBAAf,CAAgCC,MAAhC,GAAyC,KAAzC;AACA,iBAAKpE,SAAL,CAAeqE,iBAAf,CAAiCD,MAAjC,GAA0C,IAA1C;AACH,WAHD,MAIK;AACD,iBAAKpE,SAAL,CAAemE,gBAAf,CAAgCC,MAAhC,GAAyC,IAAzC;AACA,iBAAKpE,SAAL,CAAeqE,iBAAf,CAAiCD,MAAjC,GAA0C,KAA1C;AACH;;AAED,cAAI,KAAKpE,SAAL,CAAeiE,WAAf,CAA2BF,MAA3B,KAAsC,CAA1C,EAA6C;AACzC,iBAAK/D,SAAL,CAAesE,iBAAf,CAAiCF,MAAjC,GAA0C,KAA1C;AACA,iBAAKpE,SAAL,CAAeuE,kBAAf,CAAkCH,MAAlC,GAA2C,IAA3C;AACH,WAHD,MAIK;AACD,iBAAKpE,SAAL,CAAesE,iBAAf,CAAiCF,MAAjC,GAA0C,IAA1C;AACA,iBAAKpE,SAAL,CAAeuE,kBAAf,CAAkCH,MAAlC,GAA2C,KAA3C;AACH;;AACD,eAAKI,OAAL;AACA,eAAKC,cAAL;AAEA,eAAKvD,gBAAL,GAAwBzB,cAAc,CAAC,CAAD,EAAI,CAAJ,CAAtC;AACA,eAAKQ,QAAL,CAAcyE,eAAd,CAA8BC,WAA9B,GAA4C,KAAK1E,QAAL,CAAc2E,MAAd,CAAqB,KAAK1D,gBAA1B,CAA5C;AACA,eAAK2D,eAAL;AACA,eAAKC,YAAL,CAAkB,YAAY;AAC1B,iBAAK9E,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgB0B,WAA5C,EAAyD,KAAKC,YAA9D,EAA4E,IAA5E;AACA,iBAAKjF,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgB4B,UAA5C,EAAwD,KAAKC,WAA7D,EAA0E,IAA1E;AACA,iBAAKnF,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgB8B,SAA5C,EAAuD,KAAKC,UAA5D,EAAwE,IAAxE;AACA,iBAAKrF,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgBgC,UAA5C,EAAwD,KAAKC,WAA7D,EAA0E,IAA1E;AACH,WALD,EAKG,GALH;AAMH;;AAEOf,QAAAA,OAAO,GAAS;AACpB,iBAAO,KAAK9B,SAAL,CAAe8C,MAAf,GAAwB,EAA/B,EAAmC;AAC/B,gBAAIC,GAAkB,GAAG,IAAIC,KAAJ,CAAU,EAAV,CAAzB;AACA,gBAAIC,OAAoB,GAAG,IAAID,KAAJ,CAAU,EAAV,CAA3B;AACA,gBAAIE,MAAmB,GAAG,IAAIF,KAAJ,CAAU,EAAV,CAA1B;AACAD,YAAAA,GAAG,CAACI,IAAJ,CAAS,CAAC,CAAV,EAAa,CAAb,EAAgB,EAAhB;AACAF,YAAAA,OAAO,CAACE,IAAR,CAAa,KAAKnE,WAAlB,EAA+B,CAA/B,EAAkC,EAAlC;AACAkE,YAAAA,MAAM,CAACC,IAAP,CAAY,KAAKlE,UAAjB,EAA6B,CAA7B,EAAgC,EAAhC;AACA,iBAAKe,SAAL,CAAeoD,IAAf,CAAoBL,GAApB;AACA,iBAAK9C,aAAL,CAAmBmD,IAAnB,CAAwBH,OAAxB;AACA,iBAAK/C,YAAL,CAAkBkD,IAAlB,CAAuBF,MAAvB;AACH;AACJ;;AAESG,QAAAA,MAAM,CAACC,SAAD,EAA0B;AACtC,cAAI,KAAKhG,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsClF,CAAtC,GAA0C,KAAKA,CAA/C,IAAoD,KAAKoB,UAA7D,EAAyE;AACrE,iBAAKA,UAAL,GAAkB,KAAlB,CADqE,CAErE;;AACA1C,YAAAA,KAAK,CAACyG,eAAN,CAAsB,KAAKnG,SAAL,CAAeiG,aAArC;AACA,iBAAKjG,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,GAAwC,IAAI9G,IAAJ,CAAS,KAAKY,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAA/C,EAAkD,KAAKC,CAAvD,EAA0D,CAA1D,CAAxC;AACA,iBAAKhB,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,KAAtC;AACA,iBAAKgC,kBAAL,GANqE,CAOrE;;AACA,iBAAKtB,YAAL,CAAkB,YAAY;AAC1B,mBAAK1C,UAAL,GAAkB,IAAlB;AACH,aAFD,EAEG,GAFH;AAGH;;AAED,eAAKiE,cAAL;AACA,eAAKC,SAAL,GAfsC,CAgBtC;AACH;;AAEOC,QAAAA,oBAAoB,CAACC,KAAD,EAAoBpD,IAApB,EAAsC;AAC9D,cAAIqD,QAAQ,GAAG,KAAKxG,QAAL,CAAcyG,UAAd,CAAyBC,aAAzB,CAAuC,IAAIvH,IAAJ,CAASoH,KAAK,CAACI,WAAN,GAAoB7F,CAA7B,EAAgCyF,KAAK,CAACI,WAAN,GAAoB5F,CAApD,EAAuD,CAAvD,CAAvC,CAAf;AACAoC,UAAAA,IAAI,CAACyD,qBAAL,CAA2B,KAAKrG,EAAhC,EAAoC,IAAIpB,IAAJ,CAASqH,QAAQ,CAAC1F,CAAlB,EAAqB0F,QAAQ,CAACzF,CAA9B,CAApC;AACA,iBAAO,KAAKR,EAAZ;AACH;;AAEOyE,QAAAA,YAAY,CAACuB,KAAD,EAA0B,CAC7C;;AAEOrB,QAAAA,WAAW,CAACqB,KAAD,EAA0B;AACzC,cAAIhG,EAAE,GAAG,KAAK+F,oBAAL,CAA0BC,KAA1B,EAAiC,KAAKvG,QAAL,CAAcyG,UAAd,CAAyBtD,IAA1D,CAAT;AACA,cAAI0D,QAAJ;AACA,cAAIC,IAAI,GAAGvG,EAAE,CAACO,CAAd;AACA,cAAIiG,IAAI,GAAGxG,EAAE,CAACQ,CAAH,GAAO,GAAlB,CAJyC,CAKzC;;AAEA8F,UAAAA,QAAQ,GAAGG,IAAI,CAACC,KAAL,CAAWF,IAAX,EAAiBD,IAAjB,KAA0B,MAAME,IAAI,CAACE,EAArC,CAAX;AACA,eAAKnH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiCP,QAAQ,GAAG,EAA5C;;AACA,cAAI,KAAK9G,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,EAAjC,IAAuC,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,IAAkC,CAAC,GAA9E,EAAmF;AAC/E,iBAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,EAAjC;AACH,WAFD,MAGK,IAAI,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,EAAlC,IAAwC,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,GAA9E,EAAmF;AACpF,iBAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,EAAlC;AACH;AACJ;;AAEOhC,QAAAA,UAAU,CAACmB,KAAD,EAA0B;AACxC,cAAIhG,EAAE,GAAG,KAAK+F,oBAAL,CAA0BC,KAA1B,EAAiC,KAAKvG,QAAL,CAAcyG,UAAd,CAAyBtD,IAA1D,CAAT;AACA,eAAKpD,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,IAAtC;AACA,cAAI0C,QAAJ;AACA,cAAIC,IAAI,GAAGvG,EAAE,CAACO,CAAd;AACA,cAAIiG,IAAI,GAAGxG,EAAE,CAACQ,CAAH,GAAO,GAAlB;AAEA,eAAKqB,UAAL,GAAkB,CAAlB,CAPwC,CAQxC;;AAEAyE,UAAAA,QAAQ,GAAGG,IAAI,CAACC,KAAL,CAAWF,IAAX,EAAiBD,IAAjB,KAA0B,MAAME,IAAI,CAACE,EAArC,CAAX;AAAoD;AACpD,eAAKnH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiCP,QAAQ,GAAG,EAA5C;;AACA,cAAI,KAAK9G,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,EAAjC,IAAuC,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,IAAkC,CAAC,GAA9E,EAAmF;AAC/E,iBAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,EAAjC;AACH,WAFD,MAGK,IAAI,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,EAAlC,IAAwC,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,GAA9E,EAAmF;AACpF,iBAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,EAAlC;AACH;;AACD,cAAIlF,KAAa,GAAG,GAApB;AACA,cAAIpB,CAAS,GAAG,GAAhB;AACA,cAAIC,CAAS,GAAG,GAAhB;AACA,eAAKiB,GAAL,GAAW,KAAKjC,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,IAAkCJ,IAAI,CAACE,EAAL,GAAU,GAA5C,CAAX;AACA,cAAIG,MAAc,GAAG,CAACnF,KAAK,GAAGnB,CAAT,IAAciG,IAAI,CAACM,GAAL,CAAS,KAAKtF,GAAd,CAAnC;AACA,cAAIC,OAAe,GAAGnB,CAAC,GAAGkG,IAAI,CAACM,GAAL,CAAS,KAAKtF,GAAd,CAA1B;AACA,eAAKC,OAAL,GAAeA,OAAf;AAEA,cAAII,aAAqB,GAAG,IAA5B,CA1BwC,CA0BN;;AAElC,cAAI,KAAKtC,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,IAAkC,CAAC,EAAnC,IAAyC,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,IAAkC,EAA/E,EAAmF;AAC/E/H,YAAAA,KAAK,CAAC,KAAKU,SAAL,CAAeiG,aAAhB,CAAL,CACKuB,EADL,CACQlF,aADR,EACuB;AAAE4D,cAAAA,QAAQ,EAAE,IAAI9G,IAAJ,CAAS,CAACkI,MAAV,EAAkBtG,CAAC,GAAG,GAAtB,EAA2B,CAA3B;AAAZ,aADvB,EACoE;AAC5DyG,cAAAA,MAAM,EAAE,QADoD,CACzC;;AADyC,aADpE,EAGOvE,KAHP;AAIH,WALD,MAMK,IAAI,KAAKlD,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,EAAtC,EAA0C;AAC3C,iBAAKnF,OAAL,GAAe,CAACA,OAAhB;AACA5C,YAAAA,KAAK,CAAC,KAAKU,SAAL,CAAeiG,aAAhB,CAAL,CACKuB,EADL,CACQlF,aAAa,GAAG,GADxB,EAC6B;AAAE4D,cAAAA,QAAQ,EAAE,IAAI9G,IAAJ,CAAS2B,CAAT,EAAY,CAACmB,OAAD,GAAWC,KAAvB,EAA8B,CAA9B;AAAZ,aAD7B,EAC6E;AACrEsF,cAAAA,MAAM,EAAE,QAD6D,CAClD;;AADkD,aAD7E,EAGOvE,KAHP;AAIH,WANI,MAOA;AACD,iBAAKhB,OAAL,GAAeA,OAAf;AACA5C,YAAAA,KAAK,CAAC,KAAKU,SAAL,CAAeiG,aAAhB,CAAL,CACKuB,EADL,CACQlF,aAAa,GAAG,GADxB,EAC6B;AAAE4D,cAAAA,QAAQ,EAAE,IAAI9G,IAAJ,CAAS,CAAC2B,CAAV,EAAamB,OAAO,GAAGC,KAAvB,EAA8B,CAA9B;AAAZ,aAD7B,EAC6E;AACrEsF,cAAAA,MAAM,EAAE,QAD6D,CAClD;;AADkD,aAD7E,EAGOvE,KAHP;AAIH;;AACD,eAAKlD,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgB8B,SAA7C,EAAwD,KAAKC,UAA7D,EAAyE,IAAzE;AACA,eAAKrF,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,eAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AACH;;AAEOmE,QAAAA,yBAAyB,CAACrB,KAAD,EAAoBpD,IAApB,EAAsC;AACnE,cAAIqD,QAAQ,GAAG,KAAKxG,QAAL,CAAcyG,UAAd,CAAyBC,aAAzB,CAAuC,IAAIvH,IAAJ,CAASoH,KAAK,CAACI,WAAN,GAAoB7F,CAA7B,EAAgCyF,KAAK,CAACI,WAAN,GAAoB5F,CAApD,EAAuD,CAAvD,CAAvC,CAAf;AACAoC,UAAAA,IAAI,CAACyD,qBAAL,CAA2B,KAAKrG,EAAhC,EAAoC,IAAIpB,IAAJ,CAASqH,QAAQ,CAAC1F,CAAlB,EAAqB0F,QAAQ,CAACzF,CAA9B,CAApC;AACA,iBAAO,KAAKR,EAAZ;AACH;;AAEO+E,QAAAA,WAAW,CAACiB,KAAD,EAA0B;AACzC,cAAIhG,EAAE,GAAG,KAAKqH,yBAAL,CAA+BrB,KAA/B,EAAsC,KAAKvG,QAAL,CAAcyG,UAAd,CAAyBtD,IAA/D,CAAT;AACA,cAAI0D,QAAJ;AACA,cAAIC,IAAI,GAAGvG,EAAE,CAACO,CAAd;AACA,cAAIiG,IAAI,GAAGxG,EAAE,CAACQ,CAAH,GAAO,GAAlB,CAJyC,CAKzC;;AAEA8F,UAAAA,QAAQ,GAAGG,IAAI,CAACC,KAAL,CAAWF,IAAX,EAAiBD,IAAjB,KAA0B,MAAME,IAAI,CAACE,EAArC,CAAX;AACA,eAAKnH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiCP,QAAQ,GAAG,EAA5C;;AACA,cAAI,KAAK9G,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,EAAjC,IAAuC,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,IAAkC,CAAC,GAA9E,EAAmF;AAC/E,iBAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,EAAjC;AACH,WAFD,MAGK,IAAI,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,EAAlC,IAAwC,KAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,GAA9E,EAAmF;AACpF,iBAAKrH,SAAL,CAAeoH,SAAf,CAAyBC,KAAzB,GAAiC,CAAC,EAAlC;AACH;AACJ;;AAEO5C,QAAAA,cAAc,GAAS;AAC3B,eAAK,IAAIgB,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKhF,OAA7B,EAAsCgF,GAAG,EAAzC,EAA6C;AACzC,iBAAK5E,MAAL,GAAc,CAAC,GAAf;;AACA,iBAAK,IAAIiH,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKpH,OAA7B,EAAsCoH,GAAG,EAAzC,EAA6C;AACzC;AACA,mBAAK7G,YAAL,GAAoBxB,cAAc,CAAC,CAAD,EAAI,CAAJ,CAAlC;AACA,mBAAKiC,WAAL,GAAmB,IAAIvC,IAAJ,EAAnB;AACA,mBAAKuC,WAAL,GAAmBnC,WAAW,CAAC,KAAKS,SAAL,CAAe+H,UAAhB,CAA9B;AACA,mBAAKrF,SAAL,CAAe+C,GAAf,EAAoBqC,GAApB,IAA2B,KAAK7G,YAAhC;AACA,mBAAK0B,aAAL,CAAmB8C,GAAnB,EAAwBqC,GAAxB,IAA+B,KAAKpG,WAApC;AACA,mBAAKA,WAAL,CAAiBsG,YAAjB,CAA8BxI,MAA9B,EAAsCmF,WAAtC,GAAoD,KAAK1E,QAAL,CAAc2E,MAAd,CAAqB,KAAK3D,YAA1B,CAApD;AACA,mBAAKS,WAAL,CAAiBsG,YAAjB,CAA8BrI,SAA9B,EAAyCsI,KAAzC,CAA+C,CAA/C,IAAoD,KAAKhI,QAAL,CAAciI,aAAd,CAA4B,KAAKjH,YAAjC,CAApD;AACA,mBAAKS,WAAL,CAAiBsG,YAAjB,CAA8BrI,SAA9B,EAAyCwI,WAAzC,GAAuD,KAAKlI,QAAL,CAAciI,aAAd,CAA4B,KAAKjH,YAAjC,CAAvD;AACA,mBAAKjB,SAAL,CAAeoI,aAAf,CAA6BC,QAA7B,CAAsC,KAAK3G,WAA3C;AACA,mBAAKA,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKyB,MAAd,EAAsB,KAAKC,MAA3B,EAAmC,CAAnC,CAA5B;;AACA,kBAAI2E,GAAG,GAAG,CAAN,IAAW,CAAf,EAAkB;AACd,qBAAK/D,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAArE,EAAwE,CAAxE,CAA5B;AACH;;AACD,mBAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,IAA8B,KAAKpG,WAAL,CAAiBwE,QAA/C;AACA,mBAAKrF,MAAL,IAAe,EAAf;AACH;;AACD,iBAAKC,MAAL,IAAe,EAAf;AACH;AACJ;;AAEOuF,QAAAA,cAAc,GAAS;AAC3B,cAAI,KAAKrG,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,KAA4C,KAAKA,CAAjD,IAAsD,KAAKK,SAAL,KAAmB,IAA7E,EAAmF;AAC/E,iBAAKA,SAAL,GAAiB,KAAjB;AACA9B,YAAAA,KAAK,CAAC,KAAKU,SAAL,CAAeiG,aAAhB,CAAL,CACKuB,EADL,CACQ,KAAKlF,aADb,EAC4B;AAAE4D,cAAAA,QAAQ,EAAE,IAAI9G,IAAJ,CAAS,CAAC,KAAK2B,CAAf,EAAmB,KAAKmB,OAAL,IAAgB,IAAI,KAAKG,UAAzB,CAAD,GAAyC,KAAKF,KAAhE,EAAuE,CAAvE;AAAZ,aAD5B,EACqH;AAC7GsF,cAAAA,MAAM,EAAE,QADqG,CAC1F;;AAD0F,aADrH,EAGOvE,KAHP;AAKA,iBAAKb,UAAL,IAAmB,CAAnB;AACA,iBAAKrC,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,iBAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AAEA,iBAAKoB,YAAL,CAAkB,YAAY;AAC1B,mBAAK1D,SAAL,GAAiB,IAAjB;AACH,aAFD,EAEG,GAFH;AAGH;;AAED,cAAI,KAAKpB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,KAA4C,CAAC,KAAKA,CAAlD,IAAuD,KAAKK,SAAL,KAAmB,IAA9E,EAAoF;AAChF,iBAAKA,SAAL,GAAiB,KAAjB;AACA9B,YAAAA,KAAK,CAAC,KAAKU,SAAL,CAAeiG,aAAhB,CAAL,CACKuB,EADL,CACQ,KAAKlF,aADb,EAC4B;AAAE4D,cAAAA,QAAQ,EAAE,IAAI9G,IAAJ,CAAS,KAAK2B,CAAd,EAAkB,KAAKmB,OAAL,IAAgB,IAAI,KAAKG,UAAzB,CAAD,GAAyC,KAAKF,KAA/D,EAAsE,CAAtE;AAAZ,aAD5B,EACoH;AAC5GsF,cAAAA,MAAM,EAAE,QADoG,CACzF;;AADyF,aADpH,EAGOvE,KAHP;AAKA,iBAAKb,UAAL,IAAmB,CAAnB;AACA,iBAAKrC,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,iBAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AAEA,iBAAKoB,YAAL,CAAkB,YAAY;AAC1B,mBAAK1D,SAAL,GAAiB,IAAjB;AACH,aAFD,EAEG,GAFH;AAGH;AACJ;;AAEOgF,QAAAA,kBAAkB,GAAS;AAC/B,eAAK1E,WAAL,GAAmBnC,WAAW,CAAC,KAAKS,SAAL,CAAe+H,UAAhB,CAA9B,CAD+B,CAE/B;;AACA,eAAKrG,WAAL,CAAiBsG,YAAjB,CAA8BxI,MAA9B,EAAsCmF,WAAtC,GAAoD,KAAK1E,QAAL,CAAc2E,MAAd,CAAqB,KAAK1D,gBAA1B,CAApD;AACA,eAAKQ,WAAL,CAAiBsG,YAAjB,CAA8BrI,SAA9B,EAAyCsI,KAAzC,CAA+C,CAA/C,IAAoD,KAAKhI,QAAL,CAAciI,aAAd,CAA4B,KAAKhH,gBAAjC,CAApD;AACA,eAAKQ,WAAL,CAAiBsG,YAAjB,CAA8BrI,SAA9B,EAAyCwI,WAAzC,GAAuD,KAAKlI,QAAL,CAAciI,aAAd,CAA4B,KAAKhH,gBAAjC,CAAvD;AACA,eAAKlB,SAAL,CAAeoI,aAAf,CAA6BC,QAA7B,CAAsC,KAAK3G,WAA3C;;AACA,eAAK,IAAI4G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKzF,OAAL,CAAa2C,MAAjC,EAAyC8C,CAAC,EAA1C,EAA8C;AAC1C,gBAAI,KAAKtI,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,GAA0C,KAAK8B,OAAL,CAAayF,CAAb,IAAkB,EAA5D,IACG,KAAKtI,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,IAA2C,KAAK8B,OAAL,CAAayF,CAAb,IAAkB,EADpE,EACwE;AACpE,mBAAK5G,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKyD,OAAL,CAAayF,CAAb,CAAT,EAA0B,GAA1B,EAA+B,CAA/B,CAA5B;AACH,aAHD,MAIK,IAAI,KAAKtI,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,GAA0C,KAAK8B,OAAL,CAAa,CAAb,CAA9C,EAA+D;AAChE,mBAAKnB,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKyD,OAAL,CAAa,CAAb,CAAT,EAA0B,GAA1B,EAA+B,CAA/B,CAA5B;AACH,aAFI,MAGA,IAAI,KAAK7C,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,GAA0C,KAAK8B,OAAL,CAAa,KAAKA,OAAL,CAAa2C,MAAb,GAAsB,CAAnC,CAA9C,EAAqF;AACtF,mBAAK9D,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKyD,OAAL,CAAa,KAAKA,OAAL,CAAa2C,MAAb,GAAsB,CAAnC,CAAT,EAAgD,GAAhD,EAAqD,CAArD,CAA5B;AACH;AACJ;;AACD,eAAKxF,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,eAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AACA,eAAK1D,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,GAAwC,IAAI9G,IAAJ,CAAS,CAAT,EAAY,CAAC,GAAb,EAAkB,CAAlB,CAAxC;AACA,eAAKY,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,KAAtC;AACA,eAAKmE,iBAAL;AACA,eAAKC,iBAAL;AACA,eAAKC,YAAL,GAzB+B,CA0B/B;;AACA,eAAKC,aAAL;AACH;;AAEOC,QAAAA,kBAAkB,GAAS;AAC/B,eAAKjH,WAAL,GAAmB,IAAIvC,IAAJ,EAAnB;AACAO,UAAAA,KAAK,CAACyG,eAAN,CAAsB,KAAKnG,SAAL,CAAeiG,aAArC;AACA,eAAKvE,WAAL,GAAmBnC,WAAW,CAAC,KAAKS,SAAL,CAAe+H,UAAhB,CAA9B;AACA,eAAKrG,WAAL,CAAiBsG,YAAjB,CAA8BxI,MAA9B,EAAsCmF,WAAtC,GAAoD,KAAK1E,QAAL,CAAc2E,MAAd,CAAqB,KAAK1D,gBAA1B,CAApD;AACA,eAAKQ,WAAL,CAAiBsG,YAAjB,CAA8BrI,SAA9B,EAAyCsI,KAAzC,CAA+C,CAA/C,IAAoD,KAAKhI,QAAL,CAAciI,aAAd,CAA4B,KAAKhH,gBAAjC,CAApD;AACA,eAAKQ,WAAL,CAAiBsG,YAAjB,CAA8BrI,SAA9B,EAAyCwI,WAAzC,GAAuD,KAAKlI,QAAL,CAAciI,aAAd,CAA4B,KAAKhH,gBAAjC,CAAvD;AACA,eAAKlB,SAAL,CAAeoI,aAAf,CAA6BC,QAA7B,CAAsC,KAAK3G,WAA3C;AACA,eAAK1B,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,eAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AACH;;AAEO6E,QAAAA,iBAAiB,GAAS;AAC9B,cAAI,KAAK7G,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,CAAC,GAArC,EAA0C;AACtC,iBAAKW,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,CAAC,GAAV,EAAe,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAAzC,EAA4C,CAA5C,CAA5B;AACH,WAFD,MAGK,IAAI,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,CAAC,GAArC,EAA0C;AAC3C,iBAAKW,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,CAAC,GAAV,EAAe,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAAzC,EAA4C,CAA5C,CAA5B;AACH,WAFI,MAGA,IAAI,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,GAApC,EAAyC;AAC1C,iBAAKW,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,GAAT,EAAc,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAAxC,EAA2C,CAA3C,CAA5B;AACH,WAFI,MAGA,IAAI,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,GAApC,EAAyC;AAC1C,iBAAKW,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,GAAT,EAAc,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAAxC,EAA2C,CAA3C,CAA5B;AACH;AACJ;;AAEO0H,QAAAA,aAAa,GAAS;AAC1B,eAAKxH,gBAAL,GAAwB,KAAKC,mBAA7B;AACA,eAAKlB,QAAL,CAAcyE,eAAd,CAA8BC,WAA9B,GAA4C,KAAK1E,QAAL,CAAc2E,MAAd,CAAqB,KAAK1D,gBAA1B,CAA5C;AACA,eAAKjB,QAAL,CAAc2I,YAAd,CAA2BlF,IAA3B;AACA,eAAKmB,eAAL;AACA,eAAK7E,SAAL,CAAe6I,WAAf,CAA2BC,QAA3B,CAAoC,KAAKtG,SAAzC,EAAoD4B,MAApD,GAA6D,KAA7D;AACA,eAAK9C,SAAL;;AAEA,cAAI,KAAKQ,SAAL,KAAmB,KAAvB,EAA8B;AAC1B,iBAAKU,SAAL;AACA,iBAAKlB,SAAL,GAAiB,CAAjB;AACH;;AAED,eAAKwD,YAAL,CAAkB,YAAY;AAC1B,iBAAK9E,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgB8B,SAA5C,EAAuD,KAAKC,UAA5D,EAAwE,IAAxE;AAEH,WAHD,EAGG,GAHH;AAKA,eAAK0D,SAAL;;AACA,cAAI,KAAKvG,SAAL,KAAmB,CAAC,CAApB,IAAyB,KAAKZ,MAAlC,EAA0C;AACtC,iBAAKa,YAAL;AACA,iBAAKuG,UAAL;AACA,iBAAKxG,SAAL,GAAiB,KAAKC,YAAtB;;AACA,gBAAI,KAAKA,YAAL,KAAsB,CAAC,CAA3B,EAA8B;AAC1B,mBAAKD,SAAL,GAAiB,CAAjB;AACA,mBAAKC,YAAL,GAAoB,CAApB;AACH;AACJ;;AAED,eAAK,IAAI6F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK9F,SAAL,GAAiB,CAArC,EAAwC8F,CAAC,EAAzC,EAA6C;AACzC,iBAAKtI,SAAL,CAAe6I,WAAf,CAA2BC,QAA3B,CAAoCR,CAApC,EAAuClE,MAAvC,GAAgD,IAAhD;AACH;;AACD,eAAKtC,SAAL,GAAiB,KAAjB;AACA,eAAKM,UAAL,GAAkB,IAAlB,CAjC0B,CAkC1B;AACA;AACH;;AAEOqG,QAAAA,YAAY,GAAG;AACnB,eAAKQ,kBAAL;AACA,eAAKjH,UAAL,GAAkBiF,IAAI,CAACiC,GAAL,CAAS,KAAKxH,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,GAA8B,GAAvC,IAA8C,EAAhE;AACA,eAAKe,UAAL,GAAkBkF,IAAI,CAACkC,KAAL,CAAW,CAAC,KAAKzH,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,CAAC,GAAhC,IAAuC,EAAlD,CAAlB,CAHmB,CAInB;AACA;AACA;;AACA,eAAK2B,SAAL,CAAe,KAAKV,UAApB,EAAgC,KAAKD,UAArC,IAAmD,KAAKb,gBAAxD;AACA,eAAK0B,YAAL,CAAkB,KAAKZ,UAAvB,EAAmC,KAAKD,UAAxC,IAAsD,KAAKL,WAAL,CAAiBwE,QAAvE;AACA,eAAKvD,aAAL,CAAmB,KAAKX,UAAxB,EAAoC,KAAKD,UAAzC,IAAuD,KAAKL,WAA5D;AACA,eAAK1B,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,IAAtC;AACA,eAAKgF,YAAL,GAXmB,CAYnB;AACA;AACA;AACH;;AAEOA,QAAAA,YAAY,GAAS;AACzB,cAAIC,QAAQ,GAAG,KAAKC,UAAL,CAAgB;AAAE7D,YAAAA,GAAG,EAAE,KAAKzD,UAAZ;AAAwB8F,YAAAA,GAAG,EAAE,KAAK/F;AAAlC,WAAhB,EAAgE,KAAKb,gBAArE,CAAf;AACA,cAAIqI,QAAgB,GAAG,EAAvB;AAEA,eAAKlI,eAAL,GAAuBgI,QAAQ,CAAC7D,MAAhC;AAEA6D,UAAAA,QAAQ,CAAC7D,MAAT,IAAmB,CAAnB,IAAwB6D,QAAQ,CAACG,GAAT,CAAcC,IAAD,IAAU;AAC3C,gBAAI,KAAKhI,UAAT,EAAqB;AACjB,mBAAKA,UAAL,GAAkB,KAAlB;AACA,mBAAKiI,QAAL;AACH,aAJ0C,CAK3C;;;AACA,iBAAKhH,SAAL,CAAe+G,IAAI,CAAChE,GAApB,EAAyBgE,IAAI,CAAC3B,GAA9B,IAAqC,CAAC,CAAtC;AACA,iBAAKlF,YAAL,CAAkB6G,IAAI,CAAChE,GAAvB,EAA4BgE,IAAI,CAAC3B,GAAjC,IAAwC,IAAI1I,IAAJ,CAAS,CAAC,GAAV,EAAe,GAAf,EAAoB,CAApB,CAAxC;AACA,iBAAK0C,SAAL,GAAiB,IAAjB;;AACA,gBAAIuH,QAAQ,CAAC7D,MAAT,IAAmB,CAAvB,EAA0B;AACtB,mBAAKxF,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,mBAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AACH,aAHD,MAIK,IAAI2F,QAAQ,CAAC7D,MAAT,GAAkB,CAAlB,IAAuB6D,QAAQ,CAAC7D,MAAT,IAAmB,CAA9C,EAAiD;AAClD,mBAAKxF,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,mBAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AACH,aAHI,MAIA;AACD,mBAAK1D,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,mBAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AACH,aApB0C,CAqB3C;;;AACA,iBAAKf,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,KAA0CyB,QAAQ,CAACzD,IAAT,CAAc,KAAKnD,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,CAAd,CAA1C;AACA,iBAAKnF,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,IAAyC,IAAI3I,IAAJ,EAAzC;AAGH,WA1BuB,CAAxB;AA2BA,cAAIwK,YAAY,GAAG,EAAnB;;AACA,eAAK,IAAIrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK1H,SAAzB,EAAoC0H,CAAC,EAArC,EACA;AACI;AACA;AACA,gBAAG,KAAK5F,SAAL,CAAe,CAAf,EAAkB4F,CAAlB,MAAyB,CAAC,CAA7B,EAAiC;AACjCsB,YAAAA,OAAO,CAACC,GAAR;AACAF,YAAAA,YAAY,CAAC7D,IAAb,CAAkB,GAAG,KAAKwD,UAAL,CAAgB;AAAE7D,cAAAA,GAAG,EAAE,CAAP;AAAUqC,cAAAA,GAAG,EAAEQ;AAAf,aAAhB,CAArB;AACH;;AAED,cAAIwB,SAAS,GAAG,KAAKC,YAAL,CAAkBJ,YAAlB,CAAhB;AACAG,UAAAA,SAAS,CAACN,GAAV,CAAeC,IAAD,IAAU;AAEpB;AACA,iBAAK/G,SAAL,CAAe+G,IAAI,CAAChE,GAApB,EAAyBgE,IAAI,CAAC3B,GAA9B,IAAqC,CAAC,CAAtC;AACA,iBAAKlF,YAAL,CAAkB6G,IAAI,CAAChE,GAAvB,EAA4BgE,IAAI,CAAC3B,GAAjC,IAAwC,IAAI1I,IAAJ,CAAS,CAAC,GAAV,EAAe,GAAf,EAAoB,CAApB,CAAxC,CAJoB,CAMpB;;AACA,iBAAKuD,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,KAA0CyB,QAAQ,CAACzD,IAAT,CAAc,KAAKnD,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,CAAd,CAA1C;AACA,iBAAKnF,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,IAAyC,IAAI3I,IAAJ,EAAzC;AACH,WATD,EA5CyB,CAuDzB;;AACAoK,UAAAA,QAAQ,CAACC,GAAT,CAAcpG,IAAD,IAAU;AACnB,gBAAI4G,IAAI,GAAG5G,IAAI,CAAC4E,YAAL,CAAkBrI,SAAlB,CAAX;AACA,gBAAI,CAACqK,IAAL,EAAWA,IAAI,GAAG5G,IAAI,CAAC6G,YAAL,CAAkBtK,SAAlB,CAAP;AAEXqK,YAAAA,IAAI,CAACtG,IAAL;AAEAsG,YAAAA,IAAI,CAAC3G,EAAL,CAAQ1D,SAAS,CAAC2D,SAAV,CAAoB4G,QAA5B,EAAsC,MAAM;AAACF,cAAAA,IAAI,CAAC5G,IAAL,CAAUgB,MAAV,GAAmB,KAAnB,EACD,KAAK3C,UAAL,GAAkB,IADjB;AACuB,aADpE;AAGH,WATD;AAUH;;AAEOsI,QAAAA,YAAY,CAACI,IAAD,EAAmC;AAAA;;AACnD,cAAIC,UAAwB,GAAG,EAA/B;;AADmD;AAAA,4CAIN;AACrC,kBAAIC,KAAK,GAAGF,IAAI,CAACG,SAAL,CAAgBC,IAAD,IAAUA,IAAI,CAAC9E,GAAL,KAAa6C,CAAb,IAAkBiC,IAAI,CAACzC,GAAL,KAAa0C,CAAxD,CAAZ;AACA,kBAAIH,KAAK,KAAK,CAAC,CAAf,EAAkBD,UAAU,CAACtE,IAAX,CAAgB;AAAEL,gBAAAA,GAAG,EAAE6C,CAAP;AAAUR,gBAAAA,GAAG,EAAE0C;AAAf,eAAhB;AACrB,aAP8C;;AAI/C,iBAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAI,CAAC5J,SAAzB,EAAoC4J,CAAC,EAArC;AAAA;AAAA;AAJ+C;;AAGnD,eAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK3H,SAAzB,EAAoC2H,CAAC,EAArC;AAAA;AAAA;;AAMA,iBAAO8B,UAAP;AACH;;AAEOvF,QAAAA,eAAe,GAAS;AAC5B,eAAK1D,mBAAL,GAA2B1B,cAAc,CAAC,CAAD,EAAI,CAAJ,CAAzC;AACA,eAAKO,SAAL,CAAe6I,WAAf,CAA2BC,QAA3B,CAAoC,KAAKvG,UAAzC,EAAqDyF,YAArD,CAAkExI,MAAlE,EAA0EmF,WAA1E,GAAwF,KAAK1E,QAAL,CAAc2E,MAAd,CAAqB,KAAKzD,mBAA1B,CAAxF;AACA,eAAKnB,SAAL,CAAe6I,WAAf,CAA2BC,QAA3B,CAAoC,KAAKvG,UAAzC,EAAqDyF,YAArD,CAAkErI,SAAlE,EAA6E+D,IAA7E;AACH;;AAEO4C,QAAAA,SAAS,GAAS;AACtB,eAAK,IAAIgC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK3H,SAAzB,EAAoC2H,CAAC,EAArC,EAAyC;AACrC,iBAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5J,SAAzB,EAAoC4J,CAAC,EAArC,EAAyC;AACrC,kBAAI,KAAKxK,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsClF,CAAtC,GAA0C,KAAK4B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBxJ,CAAxB,GAA4B,EAAtE,IACA,KAAKhB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsClF,CAAtC,IAA2C,KAAK4B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBxJ,CAAxB,GAA4B,EAD3E,EAC+E;AAC3E,oBAAI,KAAKhB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,IAA2C,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAxB,GAA4B,EAAvE,IACA,KAAKf,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,GAA0C,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CADlE,IACuE,KAAKa,MADhF,EACwF;AACpF,uBAAKQ,UAAL,GAAkB,KAAlB;AACA,uBAAKuG,kBAAL;AACA,uBAAKjH,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKwD,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAxB,GAA4B,EAArC,EAAyC,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBxJ,CAAjE,EAAoE,CAApE,CAA5B;AACA,uBAAKhB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,GAAwC,IAAI9G,IAAJ,CAAS,CAAT,EAAY,CAAC,GAAb,EAAkB,CAAlB,CAAxC;AACA,uBAAKY,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,KAAtC,CALoF,CAMpF;;AACA,uBAAKmE,iBAAL,GAPoF,CAQpF;;AACA,uBAAKkC,uBAAL,GAToF,CAWpF;AACA;;AACA,uBAAKhC,YAAL,GAboF,CAcpF;;AACA,uBAAKC,aAAL;AACH,iBAjBD,MAkBK,IAAI,KAAK1I,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,IAA2C,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAnE,IACL,KAAKf,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,GAA0C,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAxB,GAA4B,EADjE,IACuE,KAAKa,MADhF,EACwF;AACzF,uBAAKQ,UAAL,GAAkB,KAAlB;AACA,uBAAKuG,kBAAL;AACA,uBAAKjH,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKwD,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAxB,GAA4B,EAArC,EAAyC,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBxJ,CAAjE,EAAoE,CAApE,CAA5B;AACA,uBAAKhB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,GAAwC,IAAI9G,IAAJ,CAAS,CAAT,EAAY,CAAC,GAAb,EAAkB,CAAlB,CAAxC;AACA,uBAAKY,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,KAAtC,CALyF,CAMzF;;AAEA,uBAAKmE,iBAAL,GARyF,CASzF;;AACA,uBAAKmC,sBAAL,GAVyF,CAWzF;AACA;;AACA,uBAAKjC,YAAL,GAbyF,CAczF;;AACA,uBAAKC,aAAL;AACH;AACJ,eAtCD,MAuCK,IAAI,KAAK1I,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsClF,CAAtC,IAA2C,KAAK4B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBxJ,CAAxB,GAA4B,EAAvE,IACL,KAAKhB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsClF,CAAtC,IAA2C,KAAK4B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBxJ,CAAxB,GAA4B,EADtE,EAC0E;AAC3E,oBAAI,KAAKhB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,IAA2C,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAxB,GAA4B,EAAvE,IACA,KAAKf,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,GAA0C,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CADlE,IACuE,KAAKa,MADhF,EACwF;AACpF,uBAAKQ,UAAL,GAAkB,KAAlB;AAEA,uBAAKuG,kBAAL;AACA,uBAAKjH,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKwD,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAxB,GAA4B,EAArC,EAAyC,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBxJ,CAAxB,GAA4B,EAArE,EAAyE,CAAzE,CAA5B,CAJoF,CAKpF;AACA;;AACA,uBAAKhB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,GAAwC,IAAI9G,IAAJ,CAAS,CAAT,EAAY,CAAC,GAAb,EAAkB,CAAlB,CAAxC;AACA,uBAAKY,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,KAAtC,CARoF,CASpF;;AAEA,uBAAKmE,iBAAL,GAXoF,CAYpF;;AACA,uBAAKoC,4BAAL;AAEA,uBAAKlC,YAAL,GAfoF,CAgBpF;;AACA,uBAAKC,aAAL;AACH,iBAnBD,MAoBK,IAAI,KAAK1I,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,IAA2C,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAnE,IACL,KAAKf,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,CAAsCnF,CAAtC,GAA0C,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAxB,GAA4B,EADjE,IACuE,KAAKa,MADhF,EACwF;AACzF,uBAAKQ,UAAL,GAAkB,KAAlB;AAEA,uBAAKuG,kBAAL;AACA,uBAAKjH,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKwD,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBzJ,CAAxB,GAA4B,EAArC,EAAyC,KAAK6B,YAAL,CAAkB0F,CAAlB,EAAqBkC,CAArB,EAAwBxJ,CAAxB,GAA4B,EAArE,EAAyE,CAAzE,CAA5B,CAJyF,CAKzF;AACA;;AACA,uBAAKhB,SAAL,CAAeiG,aAAf,CAA6BC,QAA7B,GAAwC,IAAI9G,IAAJ,CAAS,CAAT,EAAY,CAAC,GAAb,EAAkB,CAAlB,CAAxC;AACA,uBAAKY,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,KAAtC,CARyF,CASzF;;AAEA,uBAAKmE,iBAAL,GAXyF,CAYzF;;AACA,uBAAKqC,2BAAL;AACA,uBAAKnC,YAAL,GAdyF,CAezF;;AACA,uBAAKC,aAAL;AACH;AACJ;AACJ;AACJ;AACJ;;AAEOM,QAAAA,UAAU,GAAS;AACvB,eAAKnI,MAAL,GAAc,CAAC,GAAf;AACA,eAAKC,MAAL,GAAc,GAAd;;AACA,eAAK,IAAI2E,GAAG,GAAG,EAAf,EAAmBA,GAAG,GAAG,CAAzB,EAA4BA,GAAG,EAA/B,EAAmC;AAC/B,iBAAK,IAAIqC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKpH,OAA7B,EAAsCoH,GAAG,EAAzC,EAA6C;AACzC,mBAAKpF,SAAL,CAAe+C,GAAf,EAAoBqC,GAApB,IAA2B,KAAKpF,SAAL,CAAe+C,GAAG,GAAG,CAArB,EAAwBqC,GAAxB,CAA3B;AACA,mBAAKlF,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,IAA8B,KAAKlF,YAAL,CAAkB6C,GAAG,GAAG,CAAxB,EAA2BqC,GAA3B,CAA9B;AACA,mBAAKnF,aAAL,CAAmB8C,GAAnB,EAAwBqC,GAAxB,IAA+B,KAAKnF,aAAL,CAAmB8C,GAAG,GAAG,CAAzB,EAA4BqC,GAA5B,CAA/B;AACH;AACJ;;AAED,eAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5H,OAAzB,EAAkC4H,CAAC,EAAnC,EAAuC;AACnC,iBAAKrH,YAAL,GAAoBxB,cAAc,CAAC,CAAD,EAAI,CAAJ,CAAlC;AACA,iBAAKiC,WAAL,GAAmB,IAAIvC,IAAJ,EAAnB;AAEA,iBAAKuC,WAAL,GAAmBnC,WAAW,CAAC,KAAKS,SAAL,CAAe+H,UAAhB,CAA9B;AACA,iBAAKrF,SAAL,CAAe,CAAf,EAAkB4F,CAAlB,IAAuB,KAAKrH,YAA5B;AACA,iBAAK0B,aAAL,CAAmB,CAAnB,EAAsB2F,CAAtB,IAA2B,KAAK5G,WAAhC;AACA,iBAAKA,WAAL,CAAiBsG,YAAjB,CAA8BxI,MAA9B,EAAsCmF,WAAtC,GAAoD,KAAK1E,QAAL,CAAc2E,MAAd,CAAqB,KAAK3D,YAA1B,CAApD;AACA,iBAAKS,WAAL,CAAiBsG,YAAjB,CAA8BrI,SAA9B,EAAyCsI,KAAzC,CAA+C,CAA/C,IAAoD,KAAKhI,QAAL,CAAciI,aAAd,CAA4B,KAAKjH,YAAjC,CAApD;AACA,iBAAKS,WAAL,CAAiBsG,YAAjB,CAA8BrI,SAA9B,EAAyCwI,WAAzC,GAAuD,KAAKlI,QAAL,CAAciI,aAAd,CAA4B,KAAKjH,YAAjC,CAAvD;AACA,iBAAKjB,SAAL,CAAeoI,aAAf,CAA6BC,QAA7B,CAAsC,KAAK3G,WAA3C;AACA,iBAAKA,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKyB,MAAd,EAAsB,KAAKC,MAA3B,EAAmC,CAAnC,CAA5B;AACA,iBAAK8B,YAAL,CAAkB,CAAlB,EAAqB0F,CAArB,IAA0B,KAAK5G,WAAL,CAAiBwE,QAA3C;AACA,iBAAKrF,MAAL,IAAe,EAAf;AACH;;AACD,eAAKgK,YAAL;AACA,cAAItB,QAAQ,GAAG,EAAf;AACA,cAAII,YAAY,GAAG,EAAnB;;AACA,eAAK,IAAIrB,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,KAAK1H,SAAzB,EAAoC0H,EAAC,EAArC,EAAyCqB,YAAY,CAAC7D,IAAb,CAAkB,GAAG,KAAKwD,UAAL,CAAgB;AAAE7D,YAAAA,GAAG,EAAE,CAAP;AAAUqC,YAAAA,GAAG,EAAEQ;AAAf,WAAhB,CAArB;;AACzC,cAAIwB,SAAS,GAAG,KAAKC,YAAL,CAAkBJ,YAAlB,CAAhB;AAEAG,UAAAA,SAAS,CAACN,GAAV,CAAeC,IAAD,IAAU;AACpB;AACA,iBAAK/G,SAAL,CAAe+G,IAAI,CAAChE,GAApB,EAAyBgE,IAAI,CAAC3B,GAA9B,IAAqC,CAAC,CAAtC;AACA,iBAAKlF,YAAL,CAAkB6G,IAAI,CAAChE,GAAvB,EAA4BgE,IAAI,CAAC3B,GAAjC,IAAwC,IAAI1I,IAAJ,CAAS,CAAC,GAAV,EAAe,GAAf,EAAoB,CAApB,CAAxC,CAHoB,CAKpB;;AACA,iBAAKuD,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,KAA0CyB,QAAQ,CAACzD,IAAT,CAAc,KAAKnD,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,CAAd,CAA1C;AACA,iBAAKnF,aAAL,CAAmB8G,IAAI,CAAChE,GAAxB,EAA6BgE,IAAI,CAAC3B,GAAlC,IAAyC,IAAI3I,IAAJ,EAAzC;AACH,WARD,EAhCuB,CA0CvB;;AACAoK,UAAAA,QAAQ,CAACC,GAAT,CAAcpG,IAAD,IAAU;AACnB,gBAAI4G,IAAI,GAAG5G,IAAI,CAAC4E,YAAL,CAAkBrI,SAAlB,CAAX;AACA,gBAAI,CAACqK,IAAL,EAAWA,IAAI,GAAG5G,IAAI,CAAC6G,YAAL,CAAkBtK,SAAlB,CAAP;AAEX,iBAAKmF,YAAL,CAAkB,YAAU;AACxBkF,cAAAA,IAAI,CAACtG,IAAL;AACH,aAFD,EAEG,IAFH;AAGAsG,YAAAA,IAAI,CAAC3G,EAAL,CAAQ1D,SAAS,CAAC2D,SAAV,CAAoB4G,QAA5B,EAAsC,MAAMF,IAAI,CAAC5G,IAAL,CAAUgB,MAAV,GAAmB,KAA/D;AACH,WARD;AASH;;AAEOyG,QAAAA,YAAY,GAAS;AACzB,eAAK,IAAIvC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK3H,SAAzB,EAAoC2H,CAAC,EAArC,EAAyC;AACrC,iBAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5J,SAAzB,EAAoC4J,CAAC,EAArC,EAAyC;AACrC,kBAAIlC,CAAC,GAAG,CAAJ,KAAU,CAAd,EAAiB;AACbhJ,gBAAAA,KAAK,CAAC,KAAKqD,aAAL,CAAmB2F,CAAnB,EAAsBkC,CAAtB,CAAD,CAAL,CACKhD,EADL,CACQ,GADR,EACa;AAAEtB,kBAAAA,QAAQ,EAAE,IAAI9G,IAAJ,CAAS,KAAKuD,aAAL,CAAmB2F,CAAnB,EAAsBkC,CAAtB,EAAyBtE,QAAzB,CAAkCnF,CAAlC,GAAsC,EAA/C,EAAmD,KAAK4B,aAAL,CAAmB2F,CAAnB,EAAsBkC,CAAtB,EAAyBtE,QAAzB,CAAkClF,CAAlC,GAAsC,EAAzF,EAA6F,CAA7F;AAAZ,iBADb,EAC4H;AACpHyG,kBAAAA,MAAM,EAAE,QAD4G,CACjG;;AADiG,iBAD5H,EAGOvE,KAHP;AAIH,eALD,MAMK;AACD5D,gBAAAA,KAAK,CAAC,KAAKqD,aAAL,CAAmB2F,CAAnB,EAAsBkC,CAAtB,CAAD,CAAL,CACKhD,EADL,CACQ,GADR,EACa;AAAEtB,kBAAAA,QAAQ,EAAE,IAAI9G,IAAJ,CAAS,KAAKuD,aAAL,CAAmB2F,CAAnB,EAAsBkC,CAAtB,EAAyBtE,QAAzB,CAAkCnF,CAAlC,GAAsC,EAA/C,EAAmD,KAAK4B,aAAL,CAAmB2F,CAAnB,EAAsBkC,CAAtB,EAAyBtE,QAAzB,CAAkClF,CAAlC,GAAsC,EAAzF,EAA6F,CAA7F;AAAZ,iBADb,EAC4H;AACpHyG,kBAAAA,MAAM,EAAE,QAD4G,CACjG;;AADiG,iBAD5H,EAGOvE,KAHP;AAIH;AACJ;AACJ;;AACD,eAAK6F,SAAL;AACH;;AAEOA,QAAAA,SAAS,GAAS;AACtB,eAAK,IAAIjB,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKlH,SAA7B,EAAwCkH,GAAG,EAA3C,EAA+C;AAC3C,gBAAI,KAAKpF,SAAL,CAAe,EAAf,EAAmBoF,GAAnB,KAA2B,CAAE,CAA7B,IAAkC,KAAKlG,MAA3C,EAAmD;AAC/C,mBAAKA,MAAL,GAAc,KAAd;AACA,mBAAKC,OAAL,GAAe,IAAf;AACA,mBAAK7B,SAAL,CAAeiG,aAAf,CAA6B7B,MAA7B,GAAsC,KAAtC;AACA,mBAAK0G,cAAL;AACH;AACJ;AACJ;;AAEO7B,QAAAA,kBAAkB,GAAS;AAC/B,eAAK,IAAIxD,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK9E,SAA7B,EAAwC8E,GAAG,EAA3C,EAA+C;AAC3C,iBAAK,IAAIqC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKlH,SAA7B,EAAwCkH,GAAG,EAA3C,EAA+C;AAC3C,kBAAI,KAAKpG,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuB,EAAvB,EAA2B1E,CAA3D,IACC,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuB,EAAvB,EAA2BzE,CADhE,EACoE;AAChE,oBAAIyE,GAAG,GAAG,CAAN,KAAY,CAAhB,EAAmB;AACfmE,kBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,uBAAKnI,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,GAA8B,EAAzE,EAA6E,CAA7E,CAA5B;AACH,iBAHD,MAIK;AACD4I,kBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,uBAAKnI,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,GAA8B,EAAzE,EAA6E,CAA7E,CAA5B;AACH;AACJ,eAVD,MAWK,IAAI,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuB,CAAvB,EAA0B1E,CAA1D,IACD,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuB,CAAvB,EAA0BzE,CAD7D,EACgE;AACjE,oBAAIyE,GAAG,GAAG,CAAN,KAAY,CAAhB,EAAmB;AACfmE,kBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,uBAAKnI,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,GAA8B,EAAzE,EAA6E,CAA7E,CAA5B;;AACA,sBAAI,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B/G,CAA5D,IACA,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B9G,CADhE,EACmE;AAC3D,yBAAKU,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAArE,EAAwE,CAAxE,CAA5B;AACH;AACR,iBAPD,MAQK;AACD4I,kBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,uBAAKnI,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,GAA8B,EAAzE,EAA6E,CAA7E,CAA5B;;AACA,sBAAI,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B/G,CAA5D,IACA,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B9G,CADhE,EACmE;AAC3D,yBAAKU,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAArE,EAAwE,CAAxE,CAA5B;AACH;AACR;AACJ,eAlBI,MAmBA,IAAG,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B9G,CAA5D,IACJ,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,IAA+B,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,IAA8B,EADzD,IAEJ,KAAKpG,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,CAF7B,EAE0D;AACvD,qBAAKpG,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAArE,EAAwE,CAAxE,CAA5B;AACH,eAJA,MAKA,IAAG,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B9G,CAA5D,IACJ,KAAKU,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,IAA+B,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,IAA8B,EADzD,IAEJ,KAAKpG,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,CAF7B,EAE0D;AACvD,qBAAKpG,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAArE,EAAwE,CAAxE,CAA5B;AACH;AACR;AACJ;AAEJ;;AAEO0J,QAAAA,sBAAsB,GAAS;AACnC,eAAK,IAAIjF,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK9E,SAA7B,EAAwC8E,GAAG,EAA3C,EAA+C;AAC3C,iBAAK,IAAIqC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKlH,SAAL,GAAiB,CAAzC,EAA4CkH,GAAG,EAA/C,EAAmD;AAC/C,kBAAI,KAAKpG,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B/G,CAA5D,IACA,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B9G,CADhE,EACmE;AAC3D,qBAAKU,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAArE,EAAwE,CAAxE,CAA5B;AACH;AACR;AACJ;AACJ;;AAEO4J,QAAAA,2BAA2B,GAAS;AACxC,eAAK,IAAInF,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK9E,SAA7B,EAAwC8E,GAAG,EAA3C,EAA+C;AAC3C,iBAAK,IAAIqC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKlH,SAAL,GAAiB,CAAzC,EAA4CkH,GAAG,EAA/C,EAAmD;AAC/C,kBAAI,KAAKpG,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B/G,CAA5D,IACA,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B9G,CADhE,EACmE;AAC3D,qBAAKU,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,GAA8B,EAAzE,EAA6E,CAA7E,CAA5B;AACH;AACR;AACJ;AACJ;;AAEOyJ,QAAAA,uBAAuB,GAAS;AACpC,eAAK,IAAIhF,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK9E,SAA7B,EAAwC8E,GAAG,EAA3C,EAA+C;AAC3C,iBAAK,IAAIqC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKlH,SAAL,GAAiB,CAAzC,EAA4CkH,GAAG,EAA/C,EAAmD;AAC/C,kBAAI,KAAKpG,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B/G,CAA5D,IACA,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B9G,CADhE,EACmE;AAC3D,qBAAKU,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAArE,EAAwE,CAAxE,CAA5B;AACH;AACR;AACJ;AACJ;;AAEO2J,QAAAA,4BAA4B,GAAS;AACzC,eAAK,IAAIlF,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAK9E,SAA7B,EAAwC8E,GAAG,EAA3C,EAA+C;AAC3C,iBAAK,IAAIqC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKlH,SAAL,GAAiB,CAAzC,EAA4CkH,GAAG,EAA/C,EAAmD;AAC/C,kBAAI,KAAKpG,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B/G,CAA5D,IACA,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB6C,GAAlB,EAAuBqC,GAAvB,EAA4B9G,CADhE,EACmE;AAC3D,qBAAKU,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,GAA8B,EAAzE,EAA6E,CAA7E,CAA5B;AACH;AACR;AACJ;AACJ;;AAEOwH,QAAAA,iBAAiB,GAAS;AAC9B,eAAK,IAAIV,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG,KAAKlH,SAAL,GAAiB,CAAzC,EAA4CkH,GAAG,EAA/C,EAAmD;AAC/C,gBAAI,KAAKpG,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,KAAgC,KAAK6B,YAAL,CAAkB,CAAlB,EAAqBkF,GAArB,EAA0B/G,CAA1D,IACA,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,KAAgC,KAAK4B,YAAL,CAAkB,CAAlB,EAAqBkF,GAArB,EAA0B9G,CAD9D,EACiE;AACzD,mBAAKU,WAAL,CAAiBwE,QAAjB,GAA4B,IAAI9G,IAAJ,CAAS,KAAKsC,WAAL,CAAiBwE,QAAjB,CAA0BnF,CAA1B,GAA8B,EAAvC,EAA2C,KAAKW,WAAL,CAAiBwE,QAAjB,CAA0BlF,CAA1B,GAA8B,EAAzE,EAA6E,CAA7E,CAA5B;AACH;AACR;AACJ;;AAEa8J,QAAAA,cAAc,GAAkB;AAAA;;AAAA;AAC1C,YAAA,MAAI,CAAC7K,QAAL,CAAc8K,aAAd,CAA4B3G,MAA5B,GAAqC,IAArC;;AACA,YAAA,MAAI,CAACpE,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgB0B,WAA7C,EAA0D,MAAI,CAACC,YAA/D,EAA6E,MAA7E;;AACA,YAAA,MAAI,CAACjF,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgB4B,UAA7C,EAAyD,MAAI,CAACC,WAA9D,EAA2E,MAA3E;;AACA,YAAA,MAAI,CAACnF,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgB8B,SAA7C,EAAwD,MAAI,CAACC,UAA7D,EAAyE,MAAzE;;AACA,YAAA,MAAI,CAACrF,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgBgC,UAA7C,EAAyD,MAAI,CAACC,WAA9D,EAA2E,MAA3E;;AACA,YAAA,MAAI,CAACvF,SAAL,CAAegL,YAAf,CAA4BC,YAA5B,GAA2C,KAA3C;AACA,YAAA,MAAI,CAACjL,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,MAAI,CAAC1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;;AACA,YAAA,MAAI,CAAC5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;;AACA,YAAA,MAAI,CAACzD,QAAL,CAAciL,gBAAd,CAA+BC,MAA/B,GAAwC,MAAI,CAAC3J,WAAL,CAAiB4J,QAAjB,EAAxC;AACA,YAAA,MAAI,CAACnL,QAAL,CAAcoL,YAAd,CAA2BjH,MAA3B,GAAoC,IAApC;AACA,gBAAIkH,kBAAkB,GAAGhM,KAAK,CAAC,MAAI,CAACW,QAAL,CAAcoL,YAAf,CAAL,CAAkC7D,EAAlC,CAAqC,GAArC,EAA0C;AAAEtB,cAAAA,QAAQ,EAAE,IAAI9G,IAAJ,CAAS,CAAT,EAAY,CAAC,GAAb,EAAkB,CAAlB;AAAZ,aAA1C,CAAzB;AACAkM,YAAAA,kBAAkB,CAACpI,KAAnB;AACA,YAAA,MAAI,CAACjD,QAAL,CAAcsL,WAAd,CAA0BnH,MAA1B,GAAmC,IAAnC;AACA,YAAA,MAAI,CAACnE,QAAL,CAAcuL,eAAd,CAA8BpH,MAA9B,GAAuC,IAAvC;;AACA,YAAA,MAAI,CAACnE,QAAL,CAAcwL,WAAd,CAA0B/H,IAA1B;;AACA,gBAAI,MAAI,CAAClC,WAAL,GAAmB;AAAA;AAAA,sCAASkK,QAAT,CAAkBC,IAAlB,CAAuBC,SAA9C,EAAyD;AACrD;AACA;AACA;AACA;AACA,cAAA,MAAI,CAACC,YAAL;AACH,aAND,MAOK;AACD,cAAA,MAAI,CAAC5L,QAAL,CAAc6L,cAAd,CAA6BX,MAA7B,GAAsC;AAAA;AAAA,wCAASO,QAAT,CAAkBC,IAAlB,CAAuBC,SAAvB,CAAiCR,QAAjC,EAAtC;;AACA,cAAA,MAAI,CAACS,YAAL;AACH,aA1ByC,CA2B1C;AACA;AACA;;AA7B0C;AA8B7C;;AAEOE,QAAAA,SAAS,GAAS;AACtB,eAAKvI,QAAL;AACA,eAAKxD,SAAL,CAAegL,YAAf,CAA4BC,YAA5B,GAA2C,KAAKjL,SAAL,CAAegM,oBAAf,CAAoCf,YAApC,GAAmD,KAA9F;AACA,eAAKgB,QAAL;AACH;;AAEOC,QAAAA,QAAQ,GAAS;AACrB,eAAK1I,QAAL;AACA5D,UAAAA,QAAQ,CAACuM,SAAT,CAAmB,MAAnB,EAFqB,CAGrB;AACA;AACH;;AAEO7C,QAAAA,UAAU,CAAC8C,SAAD,EAAwB7L,IAAxB,EAAqD;AACnE,cAAI8L,KAAmB,GAAG,EAA1B;AACA,cAAIC,OAAoB,GAAG,EAA3B;AACA,cAAIC,OAAqB,GAAG,EAA5B;AAEA,cAAIC,SAAiB,GAAG,CAAC,IAAI3M,IAAJ,CAAS,CAAC,CAAV,EAAa,CAAb,CAAD,EAAkB,IAAIA,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAlB,EAAkC,IAAIA,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAlC,EAAkD,IAAIA,IAAJ,CAAS,CAAT,EAAY,CAAC,CAAb,CAAlD,EAAmE,IAAIA,IAAJ,CAAS,CAAC,CAAV,EAAa,CAAb,CAAnE,EAAoF,IAAIA,IAAJ,CAAS,CAAC,CAAV,EAAa,CAAC,CAAd,CAApF,CAAxB;AACA,cAAI4M,QAAgB,GAAG,CAAC,IAAI5M,IAAJ,CAAS,CAAC,CAAV,EAAa,CAAb,CAAD,EAAkB,IAAIA,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAlB,EAAkC,IAAIA,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAlC,EAAkD,IAAIA,IAAJ,CAAS,CAAT,EAAY,CAAC,CAAb,CAAlD,EAAmE,IAAIA,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAnE,EAAmF,IAAIA,IAAJ,CAAS,CAAT,EAAY,CAAC,CAAb,CAAnF,CAAvB,CANmE,CAQnE;;AACA,iBAAOyM,OAAO,CAAC9G,MAAR,GAAiB,KAAK7E,SAA7B,EAAwC;AACpC,gBAAI8E,GAAG,GAAG,IAAIC,KAAJ,CAAU,KAAK9E,SAAf,CAAV;AACA6E,YAAAA,GAAG,CAACI,IAAJ,CAAS,KAAT,EAAgB,CAAhB,EAAmBJ,GAAG,CAACD,MAAvB;AACA8G,YAAAA,OAAO,CAACxG,IAAR,CAAaL,GAAb;AACH;;AAED4G,UAAAA,KAAK,CAACvG,IAAN,CAAWsG,SAAX;AACAE,UAAAA,OAAO,CAACF,SAAS,CAAC3G,GAAX,CAAP,CAAuB2G,SAAS,CAACtE,GAAjC,IAAwC,IAAxC;;AAEA,iBAAOuE,KAAK,CAAC7G,MAAN,GAAe,CAAtB,EAAyB;AACrB,gBAAIkH,IAAI,GAAGL,KAAK,CAACM,KAAN,EAAX;AACAJ,YAAAA,OAAO,CAACzG,IAAR,CAAa4G,IAAb;;AAEA,iBAAK,IAAIpE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkE,SAAS,CAAChH,MAA9B,EAAsC8C,CAAC,EAAvC,EAA2C;AACvC,kBAAIsE,OAAmB,GAAG;AAAEnH,gBAAAA,GAAG,EAAE,CAAP;AAAUqC,gBAAAA,GAAG,EAAE;AAAf,eAA1B;AACA8E,cAAAA,OAAO,CAACnH,GAAR,GAAciH,IAAI,CAACjH,GAAL,GAAW,CAAX,GAAeiH,IAAI,CAACjH,GAAL,GAAWgH,QAAQ,CAACnE,CAAD,CAAR,CAAYtH,CAAtC,GAA0C0L,IAAI,CAACjH,GAAL,GAAW+G,SAAS,CAAClE,CAAD,CAAT,CAAatH,CAAhF;AACA4L,cAAAA,OAAO,CAAC9E,GAAR,GAAc4E,IAAI,CAACjH,GAAL,GAAW,CAAX,GAAeiH,IAAI,CAAC5E,GAAL,GAAW2E,QAAQ,CAACnE,CAAD,CAAR,CAAYvH,CAAtC,GAA0C2L,IAAI,CAAC5E,GAAL,GAAW0E,SAAS,CAAClE,CAAD,CAAT,CAAavH,CAAhF;AAEA,kBAAI6L,OAAO,CAAC9E,GAAR,GAAc,CAAd,IAAmB8E,OAAO,CAAC9E,GAAR,IAAe,KAAKlH,SAA3C,EAAsD;AACtD,kBAAIgM,OAAO,CAACnH,GAAR,GAAc,CAAd,IAAmBmH,OAAO,CAACnH,GAAR,IAAe,KAAK9E,SAA3C,EAAsD;AACtD,kBAAI,KAAK+B,SAAL,CAAekK,OAAO,CAACnH,GAAvB,EAA4BmH,OAAO,CAAC9E,GAApC,MAA6C,CAAC,CAAlD,EAAqD;AACrD,kBAAIvH,IAAI,IAAI,IAAR,IAAgB,KAAKmC,SAAL,CAAekK,OAAO,CAACnH,GAAvB,EAA4BmH,OAAO,CAAC9E,GAApC,KAA4CvH,IAAhE,EAAsE;;AAEtE,kBAAI,CAAC+L,OAAO,CAACM,OAAO,CAACnH,GAAT,CAAP,CAAqBmH,OAAO,CAAC9E,GAA7B,CAAL,EAAwC;AACpCuE,gBAAAA,KAAK,CAACvG,IAAN,CAAW8G,OAAX;AACAN,gBAAAA,OAAO,CAACM,OAAO,CAACnH,GAAT,CAAP,CAAqBmH,OAAO,CAAC9E,GAA7B,IAAoC,IAApC;AACH;AACJ;AACJ;;AACD,iBAAOyE,OAAP;AACH;;AAEOzI,QAAAA,QAAQ,GAAS;AACrB,cAAG,CAAC,KAAK9D,SAAT,EAAoB;AACpB,eAAKA,SAAL,CAAe6M,SAAf,CAAyBzI,MAAzB,GAAkC,IAAlC;AACA,eAAKpE,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgB0B,WAA7C,EAA0D,KAAKC,YAA/D,EAA6E,IAA7E;AACA,eAAKjF,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgB4B,UAA7C,EAAyD,KAAKC,WAA9D,EAA2E,IAA3E;AACA,eAAKnF,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgB8B,SAA7C,EAAwD,KAAKC,UAA7D,EAAyE,IAAzE;AACA,eAAKrF,SAAL,CAAe+E,SAAf,CAAyB2C,GAAzB,CAA6BrI,KAAK,CAACiE,SAAN,CAAgBgC,UAA7C,EAAyD,KAAKC,WAA9D,EAA2E,IAA3E;AACA,cAAIuH,UAAU,GAAGxN,KAAK,CAAC,KAAKW,QAAL,CAAc8M,cAAf,CAAL,CAAoCvF,EAApC,CAAuC,GAAvC,EAA4C;AAAEwF,YAAAA,KAAK,EAAE,IAAI5N,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf;AAAT,WAA5C,CAAjB;AACA0N,UAAAA,UAAU,CAAC5J,KAAX;AACH;;AAEO+J,QAAAA,UAAU,GAAS;AACvB;AACA;AACA,eAAKzJ,QAAL;AAEA,cAAIsJ,UAAU,GAAGxN,KAAK,CAAC,KAAKW,QAAL,CAAc8M,cAAf,CAAL,CAAoCvF,EAApC,CAAuC,GAAvC,EAA4C;AAAEwF,YAAAA,KAAK,EAAE,IAAI5N,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf;AAAT,WAA5C,CAAjB;AACA0N,UAAAA,UAAU,CAAC5J,KAAX;AACA,eAAK4B,YAAL,CAAkB,YAAU;AACxB,iBAAK9E,SAAL,CAAe6M,SAAf,CAAyBzI,MAAzB,GAAkC,KAAlC;AACA,iBAAKpE,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgB0B,WAA5C,EAAyD,KAAKC,YAA9D,EAA4E,IAA5E;AACA,iBAAKjF,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgB4B,UAA5C,EAAwD,KAAKC,WAA7D,EAA0E,IAA1E;AACA,iBAAKnF,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgB8B,SAA5C,EAAuD,KAAKC,UAA5D,EAAwE,IAAxE;AACA,iBAAKrF,SAAL,CAAe+E,SAAf,CAAyB1B,EAAzB,CAA4BhE,KAAK,CAACiE,SAAN,CAAgBgC,UAA5C,EAAwD,KAAKC,WAA7D,EAA0E,IAA1E;AACH,WAND,EAMG,GANH;AAOH;;AAEO2H,QAAAA,SAAS,GAAS;AACtB,eAAKlN,SAAL,CAAeyD,eAAf,CAA+BM,MAA/B,GAAwC,CAAxC;AACA,eAAKP,QAAL;AAEA;AAAA;AAAA,wCAAWQ,gBAAX,GAA8B,KAAKhE,SAAL,CAAeyD,eAAf,CAA+BM,MAA7D;AACA,eAAK/D,SAAL,CAAemE,gBAAf,CAAgCC,MAAhC,GAAyC,CAAC,KAAKpE,SAAL,CAAemE,gBAAf,CAAgCC,MAA1E;AACA,eAAKpE,SAAL,CAAeqE,iBAAf,CAAiCD,MAAjC,GAA0C,CAAC,KAAKpE,SAAL,CAAeqE,iBAAf,CAAiCD,MAA5E;AACH;;AAEO+I,QAAAA,WAAW,GAAS;AACxB,eAAKnN,SAAL,CAAeyD,eAAf,CAA+BM,MAA/B,GAAwC,GAAxC;AACA,eAAKP,QAAL;AAEA;AAAA;AAAA,wCAAWQ,gBAAX,GAA8B,KAAKhE,SAAL,CAAeyD,eAAf,CAA+BM,MAA7D;AACA,eAAK/D,SAAL,CAAemE,gBAAf,CAAgCC,MAAhC,GAAyC,CAAC,KAAKpE,SAAL,CAAemE,gBAAf,CAAgCC,MAA1E;AACA,eAAKpE,SAAL,CAAeqE,iBAAf,CAAiCD,MAAjC,GAA0C,CAAC,KAAKpE,SAAL,CAAeqE,iBAAf,CAAiCD,MAA5E;AACH;;AAEOgJ,QAAAA,eAAe,GAAS;AAC5B,eAAKpN,SAAL,CAAeiE,WAAf,CAA2BF,MAA3B,GAAoC,CAApC;AACA,eAAKP,QAAL;AAEA;AAAA;AAAA,wCAAWU,cAAX,GAA4B,KAAKlE,SAAL,CAAeiE,WAAf,CAA2BF,MAAvD;AACA,eAAK/D,SAAL,CAAesE,iBAAf,CAAiCF,MAAjC,GAA0C,CAAC,KAAKpE,SAAL,CAAesE,iBAAf,CAAiCF,MAA5E;AACA,eAAKpE,SAAL,CAAeuE,kBAAf,CAAkCH,MAAlC,GAA2C,CAAC,KAAKpE,SAAL,CAAeuE,kBAAf,CAAkCH,MAA9E;AACH;;AAEOiJ,QAAAA,iBAAiB,GAAS;AAC9B,eAAKrN,SAAL,CAAeiE,WAAf,CAA2BF,MAA3B,GAAoC,GAApC;AACA,eAAKP,QAAL;AAEA;AAAA;AAAA,wCAAWU,cAAX,GAA4B,KAAKlE,SAAL,CAAeiE,WAAf,CAA2BF,MAAvD;AACA,eAAK/D,SAAL,CAAesE,iBAAf,CAAiCF,MAAjC,GAA0C,CAAC,KAAKpE,SAAL,CAAesE,iBAAf,CAAiCF,MAA5E;AACA,eAAKpE,SAAL,CAAeuE,kBAAf,CAAkCH,MAAlC,GAA2C,CAAC,KAAKpE,SAAL,CAAeuE,kBAAf,CAAkCH,MAA9E;AACH;;AAEOsF,QAAAA,QAAQ,GAAS;AACrB,cAAInI,KAAK,GAAG,KAAKF,eAAL,GAAuB,EAAvB,GAA4B,KAAKC,SAA7C;AACA,eAAKgM,QAAL,CAAc,YAAW;AACrB;AACA,iBAAK/L,KAAL;AACA,iBAAKtB,QAAL,CAAcsN,UAAd,CAAyBpC,MAAzB,GAAkC,KAAK5J,KAAL,CAAW6J,QAAX,EAAlC;AACH,WAJD,EAIG,SAAO7J,KAJV,EAIiBA,KAAK,GAAG,CAJzB,EAI4B,CAJ5B,EAFqB,CAOrB;;AACA,eAAKC,WAAL,IAAoBD,KAApB;AACH;;AAEOiC,QAAAA,QAAQ,GAAS;AACrB,eAAKxD,SAAL,CAAeiE,WAAf,CAA2B0D,IAA3B,GAAkC,KAAK1H,QAAL,CAAc2H,SAAd,CAAwB,CAAxB,CAAlC;AACA,eAAK5H,SAAL,CAAeiE,WAAf,CAA2BP,IAA3B;AACH;;AAEauI,QAAAA,QAAQ,GAAkB;AAAA;;AAAA;AACpC,gBAAIuB,KAAK,GAAG,MAAZ;AACA,gBAAIC,UAAU,GAAG1N,IAAI,CAAC,YAAD,CAArB,CAFoC,CAGpC;AACA;;AACA,YAAA,MAAI,CAACE,QAAL,CAAcsL,WAAd,CAA0BnH,MAA1B,GAAmC,IAAnC;AACA,YAAA,MAAI,CAACnE,QAAL,CAAcuL,eAAd,CAA8BpH,MAA9B,GAAuC,IAAvC;;AACA,YAAA,MAAI,CAACnE,QAAL,CAAcwL,WAAd,CAA0B/H,IAA1B,GAPoC,CAQpC;AACA;AACA;;;AACQ9D,YAAAA,QAAQ,CAACuM,SAAT,CAAmB,MAAnB,EAX4B,CAYpC;AACA;AAboC;AAcvC;;AAEaN,QAAAA,YAAY,GAAkB;AAAA;;AAAA;AACxC;AACA;AACA;AACA;AACA;AACA;AACI,YAAA,MAAI,CAAC5L,QAAL,CAAcsL,WAAd,CAA0BnH,MAA1B,GAAmC,KAAnC;AACA,YAAA,MAAI,CAACnE,QAAL,CAAcuL,eAAd,CAA8BpH,MAA9B,GAAuC,KAAvC;AACA,YAAA,MAAI,CAACpE,SAAL,CAAegM,oBAAf,CAAoC5I,IAApC,CAAyCgB,MAAzC,GAAkD,IAAlD;AACA,YAAA,MAAI,CAACpE,SAAL,CAAe0N,WAAf,CAA2BtK,IAA3B,CAAgCgB,MAAhC,GAAyC,IAAzC;AAVoC;AAW3C;;AAl9ByC,O","sourcesContent":["import { _decorator, Component, Node, EventTouch, Vec3, input, Input, EventMouse, tween, instantiate, Sprite, randomRangeInt, Tween, Animation, director, Vec2, Button,find } from 'cc';\nimport { GameModel } from './GameModel';\nimport { GameView } from './GameView';\nimport { Coordinate } from './DataType';\nimport { MenuController } from './MenuController';\nimport { Controller } from './Splash/Controller';\nimport { StoredAPI } from './StoredAPI';\nimport { DataGame } from './DataUser/DataGame';\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameController')\nexport class GameController extends Component {\n    @property({ type: GameModel })\n    private GameModel: GameModel;\n\n    @property({ type: GameView })\n    private GameView: GameView;\n\n    private v3: Vec3 = new Vec3();\n\n    private gridRow: number = 7;\n    private gridCol: number = 17;\n\n    private lengthRow: number = 13;\n    private lengthCol: number = 17;\n\n    private xFirst: number = -330;\n    private yFirst: number = 260;\n\n    private x: number = 330;\n    private y: number = 260;\n\n    private randomNumber: number;\n    private BallRandomNumber: number;\n    private newBallRandomNumber: number;\n    private isBounced: boolean = true;\n\n    // private numberArray: number[] = [];\n    // private posArray: Vec3[] = [];\n    // private ballArrayNode: Node[] = [];\n\n    private numberBallClear: number;\n    private extraTurn: number = 1;\n    private score: number = 0;\n    private scoreResult: number = 0;\n    private isAddScore: boolean = true;\n\n    private newBallNode: Node = new Node();\n    private newBallPos: Vec3 = new Vec3(-600, 400, 0);\n\n    private isLose: boolean = true;\n    private isLosed: boolean = false;\n    private isEatBall: boolean = false;\n\n    private newBallCol: number;\n    private newBallRow: number;\n\n    private rad: number;\n    private newTan2: number;\n    private extra: number = 215;\n    private isTopTouch: boolean = true;\n\n    private numberPlus: number = 0;\n\n    private tweenDuration: number = 0.6;\n\n    private indexFirst: number = 0;\n    private indexLast: number = 4;\n    private newIndexLast: number = 4;\n\n    public initArray = [];\n    public initArrayNode = [];\n    public initArrayPos = [];\n\n    public topPosX: number[] = [-330, -290, -250, -210, -170, -130, -90, -50, -10, 30, 70, 110, 150, 190, 230, 270, 310];\n    public topPosY: number = 260;\n\n    public gameClient: any;\n    public matchData: any;\n    public userID: string;\n\n    protected start(): void {\n        // let parameters = find(\"GameClient\");\n        // let gameClientParams = parameters.getComponent(StoredAPI);\n        // this.gameClient = gameClientParams.gameClient;\n        // this.matchData = gameClientParams.matchData;\n\n        // this.userID = this.gameClient.user.citizen.getCitizenId();\n\n        this.GameModel.PauseBtn.node.on(Button.EventType.CLICK, this.clickBtn, this);\n        this.GameModel.BackgroundAudio.play();\n        \n        document.addEventListener('visibilitychange', () => {\n            if (!(document.visibilityState == \"visible\") && this.isLosed === false) {\n                this.pauseBtn();\n            }\n        })\n\n        this.GameModel.BackgroundAudio.volume = Controller.volumeValueMusic;\n        this.GameModel.InGameAudio.volume = Controller.volumeValueVFX;\n        if (this.GameModel.BackgroundAudio.volume === 0) {\n            this.GameModel.SoundMusicOnNode.active = false;\n            this.GameModel.SoundMusicOffNode.active = true;\n        }\n        else {\n            this.GameModel.SoundMusicOnNode.active = true;\n            this.GameModel.SoundMusicOffNode.active = false;\n        }\n\n        if (this.GameModel.InGameAudio.volume === 0) {\n            this.GameModel.SoundInGameOnNode.active = false;\n            this.GameModel.SoundInGameOffNode.active = true;\n        }\n        else {\n            this.GameModel.SoundInGameOnNode.active = true;\n            this.GameModel.SoundInGameOffNode.active = false;\n        }\n        this.initArr();\n        this.instantiateMap();\n\n        this.BallRandomNumber = randomRangeInt(0, 6);\n        this.GameView.BallShootNodeSF.spriteFrame = this.GameView.BallSF[this.BallRandomNumber];\n        this.predictBallNode();\n        this.scheduleOnce(function () {\n            this.GameModel.TableNode.on(Input.EventType.TOUCH_START, this.onTouchStart, this);\n            this.GameModel.TableNode.on(Input.EventType.TOUCH_MOVE, this.onTouchMove, this);\n            this.GameModel.TableNode.on(Input.EventType.TOUCH_END, this.onTouchEnd, this);\n            this.GameModel.TableNode.on(Input.EventType.MOUSE_MOVE, this.onMouseMove, this)\n        }, 0.5)\n    }\n\n    private initArr(): void {\n        while (this.initArray.length < 13) {\n            let row: Array<number> = new Array(17);\n            let rowNode: Array<Node> = new Array(17);\n            let rowPos: Array<Vec3> = new Array(17);\n            row.fill(-1, 0, 17);\n            rowNode.fill(this.newBallNode, 0, 17);\n            rowPos.fill(this.newBallPos, 0, 17);\n            this.initArray.push(row);\n            this.initArrayNode.push(rowNode);\n            this.initArrayPos.push(rowPos);\n        }\n    }\n\n    protected update(deltaTime: number): void {\n        if (this.GameModel.BallShootNode.position.y > this.y && this.isTopTouch) {\n            this.isTopTouch = false;\n            // this.tweenBall.stop();\n            Tween.stopAllByTarget(this.GameModel.BallShootNode);\n            this.GameModel.BallShootNode.position = new Vec3(this.GameModel.BallShootNode.position.x, this.y, 0);\n            this.GameModel.BallShootNode.active = false;\n            this.instantiateBallTop();\n            // console.log('top');\n            this.scheduleOnce(function () {\n                this.isTopTouch = true;\n            }, 0.5)\n        }\n\n        this.tweenBallShoot();\n        this.checkBall();\n        // this.findFloatingClusters();\n    }\n\n    private getContainerLocation(event: EventTouch, node: Node): Vec3 {\n        let location = this.GameView.CameraGame.screenToWorld(new Vec3(event.getLocation().x, event.getLocation().y, 0));\n        node.inverseTransformPoint(this.v3, new Vec3(location.x, location.y));\n        return this.v3;\n    }\n\n    private onTouchStart(event: EventTouch): void {\n    }\n\n    private onTouchMove(event: EventTouch): void {\n        let v3 = this.getContainerLocation(event, this.GameView.CameraGame.node);\n        let newAngle: number;\n        let xTan = v3.x;\n        let yTan = v3.y + 215;\n        // let newTan = yTan / xTan;\n\n        newAngle = Math.atan2(yTan, xTan) * (180 / Math.PI);\n        this.GameModel.ArrowNode.angle = newAngle - 90;\n        if (this.GameModel.ArrowNode.angle > 85 || this.GameModel.ArrowNode.angle <= -180) {\n            this.GameModel.ArrowNode.angle = 85;\n        }\n        else if (this.GameModel.ArrowNode.angle < -85 && this.GameModel.ArrowNode.angle > -180) {\n            this.GameModel.ArrowNode.angle = -85;\n        }\n    }\n\n    private onTouchEnd(event: EventTouch): void {\n        let v3 = this.getContainerLocation(event, this.GameView.CameraGame.node);\n        this.GameModel.BallShootNode.active = true;\n        let newAngle: number;\n        let xTan = v3.x;\n        let yTan = v3.y + 215;\n\n        this.numberPlus = 0;\n        // let newTan = yTan / xTan;\n\n        newAngle = Math.atan2(yTan, xTan) * (180 / Math.PI);;\n        this.GameModel.ArrowNode.angle = newAngle - 90;\n        if (this.GameModel.ArrowNode.angle > 85 || this.GameModel.ArrowNode.angle <= -180) {\n            this.GameModel.ArrowNode.angle = 85;\n        }\n        else if (this.GameModel.ArrowNode.angle < -85 && this.GameModel.ArrowNode.angle > -180) {\n            this.GameModel.ArrowNode.angle = -85;\n        }\n        let extra: number = 215\n        let x: number = 330;\n        let y: number = 260;\n        this.rad = this.GameModel.ArrowNode.angle * (Math.PI / 180);\n        let newTan: number = (extra + y) * Math.tan(this.rad);\n        let newTan2: number = x / Math.tan(this.rad);\n        this.newTan2 = newTan2;\n\n        let tweenDuration: number = 0.55; // Duration of the tween\n\n        if (this.GameModel.ArrowNode.angle >= -35 && this.GameModel.ArrowNode.angle <= 35) {\n            tween(this.GameModel.BallShootNode)\n                .to(tweenDuration, { position: new Vec3(-newTan, y + 0.5, 0) }, {\n                    easing: \"linear\",  // Tween function\n                }).start()\n        }\n        else if (this.GameModel.ArrowNode.angle < -35) {\n            this.newTan2 = -newTan2;\n            tween(this.GameModel.BallShootNode)\n                .to(tweenDuration - 0.1, { position: new Vec3(x, -newTan2 - extra, 0) }, {\n                    easing: \"linear\",  // Tween function\n                }).start()\n        }\n        else {\n            this.newTan2 = newTan2;\n            tween(this.GameModel.BallShootNode)\n                .to(tweenDuration - 0.1, { position: new Vec3(-x, newTan2 - extra, 0) }, {\n                    easing: \"linear\",  // Tween function\n                }).start()\n        }\n        this.GameModel.TableNode.off(Input.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.GameModel.InGameAudio.clip = this.GameView.AudioGame[0];\n        this.GameModel.InGameAudio.play();\n    }\n\n    private getContainerLocationMouse(event: EventMouse, node: Node): Vec3 {\n        let location = this.GameView.CameraGame.screenToWorld(new Vec3(event.getLocation().x, event.getLocation().y, 0));\n        node.inverseTransformPoint(this.v3, new Vec3(location.x, location.y));\n        return this.v3;\n    }\n\n    private onMouseMove(event: EventMouse): void {\n        let v3 = this.getContainerLocationMouse(event, this.GameView.CameraGame.node);\n        let newAngle: number;\n        let xTan = v3.x;\n        let yTan = v3.y + 215;\n        // let newTan = yTan / xTan;\n\n        newAngle = Math.atan2(yTan, xTan) * (180 / Math.PI);\n        this.GameModel.ArrowNode.angle = newAngle - 90;\n        if (this.GameModel.ArrowNode.angle > 85 || this.GameModel.ArrowNode.angle <= -180) {\n            this.GameModel.ArrowNode.angle = 85;\n        }\n        else if (this.GameModel.ArrowNode.angle < -85 && this.GameModel.ArrowNode.angle > -180) {\n            this.GameModel.ArrowNode.angle = -85;\n        }\n    }\n\n    private instantiateMap(): void {\n        for (let row = 0; row < this.gridRow; row++) {\n            this.xFirst = -330;\n            for (let col = 0; col < this.gridCol; col++) {\n                // this.yFirst = 260;\n                this.randomNumber = randomRangeInt(0, 6);\n                this.newBallNode = new Node();\n                this.newBallNode = instantiate(this.GameModel.BallPrefab);\n                this.initArray[row][col] = this.randomNumber;\n                this.initArrayNode[row][col] = this.newBallNode;\n                this.newBallNode.getComponent(Sprite).spriteFrame = this.GameView.BallSF[this.randomNumber];\n                this.newBallNode.getComponent(Animation).clips[0] = this.GameView.BallBreakAnim[this.randomNumber];\n                this.newBallNode.getComponent(Animation).defaultClip = this.GameView.BallBreakAnim[this.randomNumber];\n                this.GameModel.BallContainer.addChild(this.newBallNode);\n                this.newBallNode.position = new Vec3(this.xFirst, this.yFirst, 0);\n                if (row % 2 != 0) {\n                    this.newBallNode.position = new Vec3(this.newBallNode.position.x + 20, this.newBallNode.position.y, 0)\n                }\n                this.initArrayPos[row][col] = this.newBallNode.position;\n                this.xFirst += 40;\n            }\n            this.yFirst -= 40;\n        }\n    }\n\n    private tweenBallShoot(): void {\n        if (this.GameModel.BallShootNode.position.x === this.x && this.isBounced === true) {\n            this.isBounced = false;\n            tween(this.GameModel.BallShootNode)\n                .to(this.tweenDuration, { position: new Vec3(-this.x, (this.newTan2 * (3 + this.numberPlus)) - this.extra, 0) }, {\n                    easing: \"linear\",  // Tween function\n                }).start();\n\n            this.numberPlus += 2;\n            this.GameModel.InGameAudio.clip = this.GameView.AudioGame[2];\n            this.GameModel.InGameAudio.play();\n\n            this.scheduleOnce(function () {\n                this.isBounced = true;\n            }, 0.1)\n        }\n\n        if (this.GameModel.BallShootNode.position.x === -this.x && this.isBounced === true) {\n            this.isBounced = false;\n            tween(this.GameModel.BallShootNode)\n                .to(this.tweenDuration, { position: new Vec3(this.x, (this.newTan2 * (3 + this.numberPlus)) - this.extra, 0) }, {\n                    easing: \"linear\",  // Tween function\n                }).start();\n\n            this.numberPlus += 2;\n            this.GameModel.InGameAudio.clip = this.GameView.AudioGame[2];\n            this.GameModel.InGameAudio.play();\n\n            this.scheduleOnce(function () {\n                this.isBounced = true;\n            }, 0.1)\n        }\n    }\n\n    private instantiateBallTop(): void {\n        this.newBallNode = instantiate(this.GameModel.BallPrefab);\n        // this.ballArrayNode.push(ball);\n        this.newBallNode.getComponent(Sprite).spriteFrame = this.GameView.BallSF[this.BallRandomNumber];\n        this.newBallNode.getComponent(Animation).clips[0] = this.GameView.BallBreakAnim[this.BallRandomNumber];\n        this.newBallNode.getComponent(Animation).defaultClip = this.GameView.BallBreakAnim[this.BallRandomNumber];\n        this.GameModel.BallContainer.addChild(this.newBallNode);\n        for (let i = 0; i < this.topPosX.length; i++) {\n            if (this.GameModel.BallShootNode.position.x > this.topPosX[i] - 20 \n                && this.GameModel.BallShootNode.position.x <= this.topPosX[i] + 20) {\n                this.newBallNode.position = new Vec3(this.topPosX[i], 260, 0);\n            }\n            else if (this.GameModel.BallShootNode.position.x < this.topPosX[0]) {\n                this.newBallNode.position = new Vec3(this.topPosX[0], 260, 0);\n            }\n            else if (this.GameModel.BallShootNode.position.x > this.topPosX[this.topPosX.length - 1]) {\n                this.newBallNode.position = new Vec3(this.topPosX[this.topPosX.length - 1], 260, 0);\n            }\n        }\n        this.GameModel.InGameAudio.clip = this.GameView.AudioGame[1];\n        this.GameModel.InGameAudio.play();\n        this.GameModel.BallShootNode.position = new Vec3(0, -230, 0);\n        this.GameModel.BallShootNode.active = false;\n        this.collisionBallNode();\n        this.checkDuplicateTop();\n        this.addNumberArr();\n        // this.posArray.push(ball.position);\n        this.randomNewBall();\n    }\n\n    private instantiateNewBall(): void {\n        this.newBallNode = new Node();\n        Tween.stopAllByTarget(this.GameModel.BallShootNode);\n        this.newBallNode = instantiate(this.GameModel.BallPrefab);\n        this.newBallNode.getComponent(Sprite).spriteFrame = this.GameView.BallSF[this.BallRandomNumber];\n        this.newBallNode.getComponent(Animation).clips[0] = this.GameView.BallBreakAnim[this.BallRandomNumber];\n        this.newBallNode.getComponent(Animation).defaultClip = this.GameView.BallBreakAnim[this.BallRandomNumber];\n        this.GameModel.BallContainer.addChild(this.newBallNode);\n        this.GameModel.InGameAudio.clip = this.GameView.AudioGame[1];\n        this.GameModel.InGameAudio.play();\n    }\n\n    private collisionBallNode(): void {\n        if (this.newBallNode.position.x === -350) {\n            this.newBallNode.position = new Vec3(-310, this.newBallNode.position.y, 0);\n        }\n        else if (this.newBallNode.position.x === -370) {\n            this.newBallNode.position = new Vec3(-330, this.newBallNode.position.y, 0);\n        }\n        else if (this.newBallNode.position.x === 370) {\n            this.newBallNode.position = new Vec3(330, this.newBallNode.position.y, 0);\n        }\n        else if (this.newBallNode.position.x === 350) {\n            this.newBallNode.position = new Vec3(310, this.newBallNode.position.y, 0);\n        }\n    }\n\n    private randomNewBall(): void {\n        this.BallRandomNumber = this.newBallRandomNumber;\n        this.GameView.BallShootNodeSF.spriteFrame = this.GameView.BallSF[this.BallRandomNumber];\n        this.GameView.BallNodeAnim.play();\n        this.predictBallNode();\n        this.GameModel.BallNewNode.children[this.indexLast].active = false;\n        this.extraTurn++;\n\n        if (this.isEatBall === false) {\n            this.indexLast--;\n            this.extraTurn = 1;\n        }\n\n        this.scheduleOnce(function () {\n            this.GameModel.TableNode.on(Input.EventType.TOUCH_END, this.onTouchEnd, this);\n            \n        }, 0.5)\n\n        this.checkLose();\n        if (this.indexLast === -1 && this.isLose) {\n            this.newIndexLast--;\n            this.newRowBall();\n            this.indexLast = this.newIndexLast;\n            if (this.newIndexLast === -1) {\n                this.indexLast = 4;\n                this.newIndexLast = 4;\n            }\n        }\n\n        for (let i = 0; i < this.indexLast + 1; i++) {\n            this.GameModel.BallNewNode.children[i].active = true;\n        }\n        this.isEatBall = false;\n        this.isTopTouch = true;\n        // this.resetRemoved();\n        // this.resetRemoved();\n    }\n\n    private addNumberArr() {\n        this.checkDuplicateBall();\n        this.newBallRow = Math.abs(this.newBallNode.position.y - 260) / 40;\n        this.newBallCol = Math.floor((this.newBallNode.position.x - -330) / 40);\n        // console.log('Row = ', this.newBallRow);\n        // console.log('Col = ', this.newBallCol);\n        // console.log(this.BallRandomNumber);\n        this.initArray[this.newBallRow][this.newBallCol] = this.BallRandomNumber;\n        this.initArrayPos[this.newBallRow][this.newBallCol] = this.newBallNode.position;\n        this.initArrayNode[this.newBallRow][this.newBallCol] = this.newBallNode;\n        this.GameModel.BallShootNode.active = true;\n        this.clearCluster();\n        // console.log('arr1: ', this.initArray);\n        // console.log('arr2: ', this.initArrayNode);\n        // console.log('arr3: ', this.initArrayPos);\n    }\n\n    private clearCluster(): void {\n        let listCoor = this.getCluster({ row: this.newBallRow, col: this.newBallCol }, this.BallRandomNumber);\n        let listNode: Node[] = [];\n\n        this.numberBallClear = listCoor.length;\n\n        listCoor.length >= 3 && listCoor.map((coor) => {\n            if (this.isAddScore) {\n                this.isAddScore = false;\n                this.addScore();\n            }\n            //Reset location \n            this.initArray[coor.row][coor.col] = -1;\n            this.initArrayPos[coor.row][coor.col] = new Vec3(-600, 400, 0);\n            this.isEatBall = true;\n            if (listCoor.length <= 5) {\n                this.GameModel.InGameAudio.clip = this.GameView.AudioGame[3];\n                this.GameModel.InGameAudio.play();\n            }\n            else if (listCoor.length > 5 && listCoor.length <= 8) {\n                this.GameModel.InGameAudio.clip = this.GameView.AudioGame[4];\n                this.GameModel.InGameAudio.play();\n            }\n            else {\n                this.GameModel.InGameAudio.clip = this.GameView.AudioGame[5];\n                this.GameModel.InGameAudio.play();\n            }\n            //Get list node\n            this.initArrayNode[coor.row][coor.col] && listNode.push(this.initArrayNode[coor.row][coor.col])\n            this.initArrayNode[coor.row][coor.col] = new Node();\n\n            \n        });\n        let listLinkCoor = [];\n        for (let i = 0; i < this.lengthCol; i++)\n        {\n            // let index = listCoor.findIndex((item) => item.row === 0 && item.col === i);\n            // if(index > -1) continue;\n            if(this.initArray[0][i] === -1 ) continue;\n            console.log()  \n            listLinkCoor.push(...this.getCluster({ row: 0, col: i }));\n        } \n\n        let emptyCoor = this.getEmptyCoor(listLinkCoor);\n        emptyCoor.map((coor) => {\n            \n            //Reset location \n            this.initArray[coor.row][coor.col] = -1;\n            this.initArrayPos[coor.row][coor.col] = new Vec3(-600, 400, 0);\n            \n            //Get list node\n            this.initArrayNode[coor.row][coor.col] && listNode.push(this.initArrayNode[coor.row][coor.col])\n            this.initArrayNode[coor.row][coor.col] = new Node();\n        })\n\n        //Clear node\n        listNode.map((node) => {\n            let anim = node.getComponent(Animation);\n            if (!anim) anim = node.addComponent(Animation);\n\n            anim.play();\n            \n            anim.on(Animation.EventType.FINISHED, () => {anim.node.active = false,\n                                                        this.isAddScore = true;});\n            \n        });\n    }\n\n    private getEmptyCoor(list: Coordinate[]): Coordinate[] {\n        let listResult: Coordinate[] = [];\n\n        for (let i = 0; i < this.lengthRow; i++)\n            for (let j = 0; j < this.lengthCol; j++) {\n                let index = list.findIndex((item) => item.row === i && item.col === j);\n                if (index === -1) listResult.push({ row: i, col: j });\n            }\n\n        return listResult;\n    }\n\n    private predictBallNode(): void {\n        this.newBallRandomNumber = randomRangeInt(0, 6);\n        this.GameModel.BallNewNode.children[this.indexFirst].getComponent(Sprite).spriteFrame = this.GameView.BallSF[this.newBallRandomNumber];\n        this.GameModel.BallNewNode.children[this.indexFirst].getComponent(Animation).play();\n    }\n\n    private checkBall(): void {\n        for (let i = 0; i < this.lengthRow; i++) {\n            for (let j = 0; j < this.lengthCol; j++) {\n                if (this.GameModel.BallShootNode.position.y > this.initArrayPos[i][j].y - 20 &&\n                    this.GameModel.BallShootNode.position.y <= this.initArrayPos[i][j].y + 20) {\n                    if (this.GameModel.BallShootNode.position.x >= this.initArrayPos[i][j].x - 20 &&\n                        this.GameModel.BallShootNode.position.x < this.initArrayPos[i][j].x && this.isLose) {\n                        this.isTopTouch = false;\n                        this.instantiateNewBall();\n                        this.newBallNode.position = new Vec3(this.initArrayPos[i][j].x - 40, this.initArrayPos[i][j].y, 0);\n                        this.GameModel.BallShootNode.position = new Vec3(0, -230, 0);\n                        this.GameModel.BallShootNode.active = false;\n                        // console.log('check1');\n                        this.collisionBallNode();\n                        // this.checkDuplicateBall();\n                        this.checkDuplicateBallRight();\n\n                        // this.posArray.push(this.newBallNode.position);\n                        // this.ballArrayNode.push(this.newBallNode);\n                        this.addNumberArr();\n                        // this.checkEatBall();\n                        this.randomNewBall();\n                    }\n                    else if (this.GameModel.BallShootNode.position.x >= this.initArrayPos[i][j].x &&\n                        this.GameModel.BallShootNode.position.x < this.initArrayPos[i][j].x + 20 && this.isLose) {\n                        this.isTopTouch = false;\n                        this.instantiateNewBall();\n                        this.newBallNode.position = new Vec3(this.initArrayPos[i][j].x + 40, this.initArrayPos[i][j].y, 0);\n                        this.GameModel.BallShootNode.position = new Vec3(0, -230, 0);\n                        this.GameModel.BallShootNode.active = false;\n                        // console.log('check2');\n                        \n                        this.collisionBallNode();\n                        // this.checkDuplicateBall();\n                        this.checkDuplicateBallLeft();\n                        // this.posArray.push(this.newBallNode.position);\n                        // this.ballArrayNode.push(this.newBallNode);\n                        this.addNumberArr();\n                        // this.checkEatBall();\n                        this.randomNewBall();\n                    }\n                }\n                else if (this.GameModel.BallShootNode.position.y >= this.initArrayPos[i][j].y - 60 &&\n                    this.GameModel.BallShootNode.position.y <= this.initArrayPos[i][j].y - 20) {\n                    if (this.GameModel.BallShootNode.position.x >= this.initArrayPos[i][j].x - 20 &&\n                        this.GameModel.BallShootNode.position.x < this.initArrayPos[i][j].x && this.isLose) {\n                        this.isTopTouch = false;\n\n                        this.instantiateNewBall();\n                        this.newBallNode.position = new Vec3(this.initArrayPos[i][j].x - 20, this.initArrayPos[i][j].y - 40, 0);\n                        // this.posArray.push(this.newBallNode.position);\n                        // this.ballArrayNode.push(this.newBallNode);\n                        this.GameModel.BallShootNode.position = new Vec3(0, -230, 0);\n                        this.GameModel.BallShootNode.active = false;\n                        // console.log('check3');\n                        \n                        this.collisionBallNode();\n                        // this.checkDuplicateBall();\n                        this.checkDuplicateBallRightUnder();\n\n                        this.addNumberArr();\n                        // this.checkEatBall();\n                        this.randomNewBall();\n                    }\n                    else if (this.GameModel.BallShootNode.position.x >= this.initArrayPos[i][j].x &&\n                        this.GameModel.BallShootNode.position.x < this.initArrayPos[i][j].x + 20 && this.isLose) {\n                        this.isTopTouch = false;\n\n                        this.instantiateNewBall();\n                        this.newBallNode.position = new Vec3(this.initArrayPos[i][j].x + 20, this.initArrayPos[i][j].y - 40, 0);\n                        // this.posArray.push(this.newBallNode.position);\n                        // this.ballArrayNode.push(this.newBallNode);\n                        this.GameModel.BallShootNode.position = new Vec3(0, -230, 0);\n                        this.GameModel.BallShootNode.active = false;\n                        // console.log('check4');\n\n                        this.collisionBallNode();\n                        // this.checkDuplicateBall();\n                        this.checkDuplicateBallLeftUnder();\n                        this.addNumberArr();\n                        // this.checkEatBall();\n                        this.randomNewBall();\n                    }\n                }\n            }\n        }\n    }\n\n    private newRowBall(): void {\n        this.xFirst = -330;\n        this.yFirst = 260;\n        for (let row = 12; row > 0; row--) {\n            for (let col = 0; col < this.gridCol; col++) {\n                this.initArray[row][col] = this.initArray[row - 1][col];\n                this.initArrayPos[row][col] = this.initArrayPos[row - 1][col];\n                this.initArrayNode[row][col] = this.initArrayNode[row - 1][col];\n            }\n        }\n\n        for (let i = 0; i < this.gridCol; i++) {\n            this.randomNumber = randomRangeInt(0, 6);\n            this.newBallNode = new Node();\n\n            this.newBallNode = instantiate(this.GameModel.BallPrefab);\n            this.initArray[0][i] = this.randomNumber;\n            this.initArrayNode[0][i] = this.newBallNode;\n            this.newBallNode.getComponent(Sprite).spriteFrame = this.GameView.BallSF[this.randomNumber];\n            this.newBallNode.getComponent(Animation).clips[0] = this.GameView.BallBreakAnim[this.randomNumber];\n            this.newBallNode.getComponent(Animation).defaultClip = this.GameView.BallBreakAnim[this.randomNumber];\n            this.GameModel.BallContainer.addChild(this.newBallNode);\n            this.newBallNode.position = new Vec3(this.xFirst, this.yFirst, 0);\n            this.initArrayPos[0][i] = this.newBallNode.position;\n            this.xFirst += 40;\n        }\n        this.pushDownBall();\n        let listNode = [];\n        let listLinkCoor = [];\n        for (let i = 0; i < this.lengthCol; i++) listLinkCoor.push(...this.getCluster({ row: 0, col: i }));\n        let emptyCoor = this.getEmptyCoor(listLinkCoor);\n\n        emptyCoor.map((coor) => {\n            //Reset location\n            this.initArray[coor.row][coor.col] = -1;\n            this.initArrayPos[coor.row][coor.col] = new Vec3(-600, 400, 0);\n            \n            //Get list node\n            this.initArrayNode[coor.row][coor.col] && listNode.push(this.initArrayNode[coor.row][coor.col])\n            this.initArrayNode[coor.row][coor.col] = new Node();\n        })\n\n        //Clear node\n        listNode.map((node) => {\n            let anim = node.getComponent(Animation);\n            if (!anim) anim = node.addComponent(Animation);\n\n            this.scheduleOnce(function(){\n                anim.play();\n            }, 0.25)\n            anim.on(Animation.EventType.FINISHED, () => anim.node.active = false);\n        });\n    }\n\n    private pushDownBall(): void {\n        for (let i = 1; i < this.lengthRow; i++) {\n            for (let j = 0; j < this.lengthCol; j++) {\n                if (i % 2 !== 0) {\n                    tween(this.initArrayNode[i][j])\n                        .to(0.3, { position: new Vec3(this.initArrayNode[i][j].position.x + 20, this.initArrayNode[i][j].position.y - 40, 0) }, {\n                            easing: \"smooth\",  // Tween function\n                        }).start();\n                }\n                else {\n                    tween(this.initArrayNode[i][j])\n                        .to(0.3, { position: new Vec3(this.initArrayNode[i][j].position.x - 20, this.initArrayNode[i][j].position.y - 40, 0) }, {\n                            easing: \"smooth\",  // Tween function\n                        }).start();\n                }\n            }\n        }\n        this.checkLose();\n    }\n\n    private checkLose(): void {\n        for (let col = 0; col < this.lengthCol; col++) {\n            if (this.initArray[12][col] != - 1 && this.isLose) {\n                this.isLose = false;\n                this.isLosed = true;\n                this.GameModel.BallShootNode.active = false;\n                this.gameOverAction();\n            }\n        }\n    }\n\n    private checkDuplicateBall(): void {\n        for (let row = 0; row < this.lengthRow; row++) {\n            for (let col = 0; col < this.lengthCol; col++) {\n                if (this.newBallNode.position.x === this.initArrayPos[row][16].x &&\n                    (this.newBallNode.position.y === this.initArrayPos[row][16].y)) {\n                    if (row % 2 === 0) {\n                        console.log('left1');\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x + 20, this.newBallNode.position.y - 40, 0);\n                    }\n                    else {\n                        console.log('right1');\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x - 20, this.newBallNode.position.y - 40, 0);\n                    }\n                }\n                else if (this.newBallNode.position.x === this.initArrayPos[row][0].x &&\n                        this.newBallNode.position.y === this.initArrayPos[row][0].y) {\n                    if (row % 2 === 0) {\n                        console.log('left2');\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x + 20, this.newBallNode.position.y - 40, 0);\n                        if (this.newBallNode.position.x === this.initArrayPos[row][col].x &&\n                            this.newBallNode.position.y === this.initArrayPos[row][col].y) {\n                                this.newBallNode.position = new Vec3(this.newBallNode.position.x + 40, this.newBallNode.position.y, 0);\n                            }\n                    }\n                    else {\n                        console.log('right2');\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x - 20, this.newBallNode.position.y - 40, 0);\n                        if (this.newBallNode.position.x === this.initArrayPos[row][col].x &&\n                            this.newBallNode.position.y === this.initArrayPos[row][col].y) {\n                                this.newBallNode.position = new Vec3(this.newBallNode.position.x + 40, this.newBallNode.position.y, 0);\n                            }\n                    }\n                }\n                else if(this.newBallNode.position.y === this.initArrayPos[row][col].y &&\n                    this.newBallNode.position.x <= this.initArrayPos[row][col] + 40 && \n                    this.newBallNode.position.x > this.initArrayPos[row][col]) {\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x + 40, this.newBallNode.position.y, 0);\n                    }\n                else if(this.newBallNode.position.y === this.initArrayPos[row][col].y &&\n                    this.newBallNode.position.x >= this.initArrayPos[row][col] - 40 && \n                    this.newBallNode.position.x < this.initArrayPos[row][col]) {\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x - 40, this.newBallNode.position.y, 0);\n                    }\n            }\n        }\n        \n    }\n\n    private checkDuplicateBallLeft(): void {\n        for (let row = 0; row < this.lengthRow; row++) {\n            for (let col = 1; col < this.lengthCol - 1; col++) {\n                if (this.newBallNode.position.x === this.initArrayPos[row][col].x &&\n                    this.newBallNode.position.y === this.initArrayPos[row][col].y) {\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x - 40, this.newBallNode.position.y, 0);\n                    }\n            }\n        }\n    }\n\n    private checkDuplicateBallLeftUnder(): void {\n        for (let row = 0; row < this.lengthRow; row++) {\n            for (let col = 1; col < this.lengthCol - 1; col++) {\n                if (this.newBallNode.position.x === this.initArrayPos[row][col].x &&\n                    this.newBallNode.position.y === this.initArrayPos[row][col].y) {\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x - 20, this.newBallNode.position.y - 40, 0);\n                    }\n            }\n        }\n    }\n\n    private checkDuplicateBallRight(): void {\n        for (let row = 0; row < this.lengthRow; row++) {\n            for (let col = 1; col < this.lengthCol - 1; col++) {\n                if (this.newBallNode.position.x === this.initArrayPos[row][col].x &&\n                    this.newBallNode.position.y === this.initArrayPos[row][col].y) {\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x + 40, this.newBallNode.position.y, 0);\n                    }\n            }\n        }\n    }\n\n    private checkDuplicateBallRightUnder(): void {\n        for (let row = 0; row < this.lengthRow; row++) {\n            for (let col = 1; col < this.lengthCol - 1; col++) {\n                if (this.newBallNode.position.x === this.initArrayPos[row][col].x &&\n                    this.newBallNode.position.y === this.initArrayPos[row][col].y) {\n                        this.newBallNode.position = new Vec3(this.newBallNode.position.x + 20, this.newBallNode.position.y - 40, 0);\n                    }\n            }\n        }\n    }\n\n    private checkDuplicateTop(): void {\n        for (let col = 1; col < this.lengthCol - 1; col++) {\n            if (this.newBallNode.position.x === this.initArrayPos[0][col].x &&\n                this.newBallNode.position.y === this.initArrayPos[0][col].y) {\n                    this.newBallNode.position = new Vec3(this.newBallNode.position.x + 20, this.newBallNode.position.y - 40, 0);\n                }\n        }\n    }\n\n    private async gameOverAction(): Promise<void> {\n        this.GameView.BlackBlurNode.active = true;\n        this.GameModel.TableNode.off(Input.EventType.TOUCH_START, this.onTouchStart, this);\n        this.GameModel.TableNode.off(Input.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.GameModel.TableNode.off(Input.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.GameModel.TableNode.off(Input.EventType.MOUSE_MOVE, this.onMouseMove, this);\n        this.GameModel.PlayAgainBtn.interactable = false;\n        this.GameModel.InGameAudio.clip = this.GameView.AudioGame[6];\n        this.GameModel.InGameAudio.play();\n        this.GameView.ScoreResultLabel.string = this.scoreResult.toString();\n        this.GameView.GameOverNode.active = true;\n        let gameOverTableTween = tween(this.GameView.GameOverNode).to(0.5, { position: new Vec3(0, -100, 0) })\n        gameOverTableTween.start();\n        this.GameView.LoadingText.active = true;\n        this.GameView.LoadingAnimNode.active = true;\n        this.GameView.LoadingAnim.play();\n        if (this.scoreResult > DataGame.dataUser.data.highScore) {\n            // DataGame.dataUser.data.highScore = this.scoreResult;\n            // await this.gameClient.user.data.setGameData({ [this.userID]: DataGame.dataUser }, false).then((response: any) => { \n            //     this.GameView.HighScoreLabel.string = DataGame.dataUser.data.highScore.toString();\n            // })\n            this.completeGame();\n        }\n        else {\n            this.GameView.HighScoreLabel.string = DataGame.dataUser.data.highScore.toString();\n            this.completeGame();\n        }\n        // this.scheduleOnce(function(){\n        // }, 0.5)\n        // this.completeGame();\n    }\n\n    private playAgain(): void {\n        this.clickBtn();\n        this.GameModel.PlayAgainBtn.interactable = this.GameModel.PlayAgainBtnGameOver.interactable = false;\n        this.initGame();\n    }\n\n    private backHome(): void {\n        this.clickBtn();\n        director.loadScene(\"Menu\");\n        // director.preloadScene(\"Menu\", function () {\n        // });\n    }\n\n    private getCluster(startCoor: Coordinate, type?: number): Coordinate[] {\n        let queue: Coordinate[] = [];\n        let visited: boolean[][] = [];\n        let cluster: Coordinate[] = [];\n\n        let deltaEven: Vec2[] = [new Vec2(-1, 0), new Vec2(1, 0), new Vec2(0, 1), new Vec2(0, -1), new Vec2(-1, 1), new Vec2(-1, -1)];\n        let deltaOdd: Vec2[] = [new Vec2(-1, 0), new Vec2(1, 0), new Vec2(0, 1), new Vec2(0, -1), new Vec2(1, 1), new Vec2(1, -1)];\n\n        //init visited\n        while (visited.length < this.lengthRow) {\n            let row = new Array(this.lengthCol);\n            row.fill(false, 0, row.length);\n            visited.push(row);\n        }\n\n        queue.push(startCoor);\n        visited[startCoor.row][startCoor.col] = true;\n\n        while (queue.length > 0) {\n            let temp = queue.shift();\n            cluster.push(temp);\n\n            for (let i = 0; i < deltaEven.length; i++) {\n                let newCoor: Coordinate = { row: 0, col: 0 };\n                newCoor.row = temp.row % 2 ? temp.row + deltaOdd[i].y : temp.row + deltaEven[i].y;\n                newCoor.col = temp.row % 2 ? temp.col + deltaOdd[i].x : temp.col + deltaEven[i].x;\n\n                if (newCoor.col < 0 || newCoor.col >= this.lengthCol) continue;\n                if (newCoor.row < 0 || newCoor.row >= this.lengthRow) continue;\n                if (this.initArray[newCoor.row][newCoor.col] === -1) continue;\n                if (type != null && this.initArray[newCoor.row][newCoor.col] != type) continue;\n\n                if (!visited[newCoor.row][newCoor.col]) {\n                    queue.push(newCoor);\n                    visited[newCoor.row][newCoor.col] = true;\n                }\n            }\n        }\n        return cluster;\n    }\n\n    private pauseBtn(): void {\n        if(!this.GameModel) return;\n        this.GameModel.PauseNode.active = true;\n        this.GameModel.TableNode.off(Input.EventType.TOUCH_START, this.onTouchStart, this);\n        this.GameModel.TableNode.off(Input.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.GameModel.TableNode.off(Input.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.GameModel.TableNode.off(Input.EventType.MOUSE_MOVE, this.onMouseMove, this);\n        let pauseTween = tween(this.GameView.PauseTableNode).to(0.5, { scale: new Vec3(1, 1, 1) })\n        pauseTween.start();\n    }\n\n    private unPauseBtn(): void {\n        // let pauseTween = tween(this.GameModel.PauseNode).to(0.5, { position: new Vec3(0, 0, 0) })\n        // pauseTween.start();\n        this.clickBtn();\n\n        let pauseTween = tween(this.GameView.PauseTableNode).to(0.5, { scale: new Vec3(0, 0, 1) })\n        pauseTween.start();\n        this.scheduleOnce(function(){\n            this.GameModel.PauseNode.active = false;\n            this.GameModel.TableNode.on(Input.EventType.TOUCH_START, this.onTouchStart, this);\n            this.GameModel.TableNode.on(Input.EventType.TOUCH_MOVE, this.onTouchMove, this);\n            this.GameModel.TableNode.on(Input.EventType.TOUCH_END, this.onTouchEnd, this);\n            this.GameModel.TableNode.on(Input.EventType.MOUSE_MOVE, this.onMouseMove, this);\n        }, 0.5)\n    }\n\n    private muteMusic(): void {\n        this.GameModel.BackgroundAudio.volume = 0;\n        this.clickBtn();\n\n        Controller.volumeValueMusic = this.GameModel.BackgroundAudio.volume;\n        this.GameModel.SoundMusicOnNode.active = !this.GameModel.SoundMusicOnNode.active;\n        this.GameModel.SoundMusicOffNode.active = !this.GameModel.SoundMusicOffNode.active;\n    }\n\n    private unMuteMusic(): void {\n        this.GameModel.BackgroundAudio.volume = 0.5;\n        this.clickBtn();\n\n        Controller.volumeValueMusic = this.GameModel.BackgroundAudio.volume;\n        this.GameModel.SoundMusicOnNode.active = !this.GameModel.SoundMusicOnNode.active;\n        this.GameModel.SoundMusicOffNode.active = !this.GameModel.SoundMusicOffNode.active;\n    }\n\n    private muteInGameAudio(): void {\n        this.GameModel.InGameAudio.volume = 0;\n        this.clickBtn();\n\n        Controller.volumeValueVFX = this.GameModel.InGameAudio.volume;\n        this.GameModel.SoundInGameOnNode.active = !this.GameModel.SoundInGameOnNode.active;\n        this.GameModel.SoundInGameOffNode.active = !this.GameModel.SoundInGameOffNode.active;\n    }\n\n    private unMuteInGameAudio(): void {\n        this.GameModel.InGameAudio.volume = 0.7;\n        this.clickBtn();\n\n        Controller.volumeValueVFX = this.GameModel.InGameAudio.volume;\n        this.GameModel.SoundInGameOnNode.active = !this.GameModel.SoundInGameOnNode.active;\n        this.GameModel.SoundInGameOffNode.active = !this.GameModel.SoundInGameOffNode.active;\n    }\n\n    private addScore(): void {\n        let score = this.numberBallClear * 10 * this.extraTurn;\n        this.schedule(function() {\n            // Here this refers to component\n            this.score++;\n            this.GameView.ScoreLabel.string = this.score.toString();\n        }, 0.0001/score, score - 1, 0);\n        // score = this.score;\n        this.scoreResult += score;\n    }\n\n    private clickBtn(): void {\n        this.GameModel.InGameAudio.clip = this.GameView.AudioGame[8];\n        this.GameModel.InGameAudio.play();\n    }\n\n    private async initGame(): Promise<void> {\n        let _this = this;\n        let parameters = find(\"GameClient\");\n        // let gameClientParams = parameters.getComponent(StoredAPI);\n        // this.gameClient = gameClientParams.gameClient;\n        this.GameView.LoadingText.active = true;\n        this.GameView.LoadingAnimNode.active = true;\n        this.GameView.LoadingAnim.play();\n        // await gameClientParams.gameClient.match.startMatch()\n        //     .then((data) => {\n        //         gameClientParams.matchData = data;\n                director.loadScene(\"Game\");\n        //     })\n        //     .catch((error) => console.log(error));\n    }\n\n    private async completeGame(): Promise<void> {\n        // await this.gameClient.match\n        //     .completeMatch(this.matchData, { score: this.scoreResult\n        //     })\n        //     .then(async (data) => {\n        //     })\n        //     .catch((error) => console.log(error));\n            this.GameView.LoadingText.active = false;\n            this.GameView.LoadingAnimNode.active = false;\n            this.GameModel.PlayAgainBtnGameOver.node.active = true;\n            this.GameModel.BackHomeBtn.node.active = true;\n    }\n}\n\n\n"]}